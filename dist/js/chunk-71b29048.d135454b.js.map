{"version":3,"sources":["webpack:///delegated ./node_modules/core-js/modules/es.object.values.js from dll-reference vendor_8e18555b2713041da4df","webpack:///delegated ./node_modules/core-js/modules/web.url.js from dll-reference vendor_8e18555b2713041da4df","webpack:///delegated ./node_modules/core-js/modules/es.string.trim.js from dll-reference vendor_8e18555b2713041da4df","webpack:///delegated ./node_modules/core-js/modules/es.array.sort.js from dll-reference vendor_8e18555b2713041da4df","webpack:///./src/pages/sceneAdmin/sceneAdmin.vue?2a0f","webpack:///./src/pages/sceneAdmin/components/config.vue?4ee6","webpack:///src/pages/sceneAdmin/components/config.vue","webpack:///./src/pages/sceneAdmin/components/config.vue?8d06","webpack:///./src/pages/sceneAdmin/components/config.vue","webpack:///src/pages/sceneAdmin/sceneAdmin.vue","webpack:///./src/pages/sceneAdmin/sceneAdmin.vue?d2bf","webpack:///./src/pages/sceneAdmin/sceneAdmin.vue","webpack:///./src/components/upload.vue?c168","webpack:///src/components/upload.vue","webpack:///./src/components/upload.vue?d6cd","webpack:///./src/components/upload.vue","webpack:///./src/components/upload.vue?9f00","webpack:///delegated ./node_modules/core-js/modules/es.array.find-index.js from dll-reference vendor_8e18555b2713041da4df","webpack:///./src/pages/sceneAdmin/sceneAdmin.vue?2c75","webpack:///./src/pages/sceneAdmin/components/config.vue?b432"],"names":["module","exports","__webpack_require__","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","on","$event","showConfig","list","indexMethod","scopedSlots","_u","key","fn","scope","class","row","enable","_s","handeEnableClick","$index","handeDeleteClick","scene_id","ref","refresh","staticRenderFns","config","show","title","$set","rules","type","model","value","callback","$$v","expression","list_pic","normal","validList","emitListData","detail_pic","validDetail","emitDetailData","_l","it","mode_id","mode_name","_e","handleCheckedChange","index","category_id","category_icon","category_name","handleSelectChange","i","idx","reg","directives","name","rawName","judgeData","slot","cancel","submit","components","Upload","data","width","height","tips","categoryList","startModeList","checkList","content","normal_object","scene_name","computed","watch","$nextTick","mounted","getCategoryList","getStartModeList","methods","purchace_link","val","compare","a","b","value1","property","value2","download_url","object","detail_pic_object","$http","dealList","allList","arr","forEach","result","newArr","push","el","category_status","selectArr","status","$refs","validate","valid","getParam","param","Object","values","copyeEl","assign","judgmentMethod","map","jud","component","Config","getList","submitEdit","delete","dealUpdateParam","$confirm","confirmButtonText","cancelButtonText","handPageChange","pages","page","console","log","defaultConfig","configDialog","item","corsUrls","handleAvatarSuccess","uploadObj","beforeAvatarUpload","imageFile","stopPropagation","clearImg","props","token","JSON","parse","localStorage","getItem","user","info","path","$emit","isType","$message","error","isLt2M","img","onload","resolve","reject","Error","src","_URL","createObjectURL","file","Promise","isSize","$props"],"mappings":"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","file":"js/chunk-71b29048.d135454b.js","sourcesContent":["module.exports = (__webpack_require__(\"1c0f\"))(317);","module.exports = (__webpack_require__(\"1c0f\"))(225);","module.exports = (__webpack_require__(\"1c0f\"))(368);","module.exports = (__webpack_require__(\"1c0f\"))(350);","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-content\"},[_c('div',{staticClass:\"filter\"},[_c('span',[_vm._v(\"场景管理\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.showConfig('add')}}},[_vm._v(\"添加场景\")])],1),_c('div',[_c('el-table',{attrs:{\"data\":_vm.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"index\":_vm.indexMethod,\"type\":\"index\",\"label\":\"序号\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"prop\":\"scene_name\",\"label\":\"场景名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"mode_name\",\"label\":\"启动方式\"}}),_c('el-table-column',{attrs:{\"prop\":\"created_at\",\"label\":\"添加时间\"}}),_c('el-table-column',{attrs:{\"prop\":\"enable\",\"label\":\"是否启用\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{class:scope.row.enable ? 'red':''},[_vm._v(_vm._s(scope.row.enable ? '启用':'禁用'))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.showConfig('look', scope.row)}}},[_vm._v(\"查看\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.showConfig('modify', scope.row)}}},[_vm._v(\"编辑\")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handeEnableClick(scope.$index,scope.row.enable)}}},[_vm._v(\" \"+_vm._s(scope.row.enable ? '禁用':'启用')+\" \")]),_c('el-button',{attrs:{\"disabled\":scope.row.enable ? true:false,\"type\":\"text\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handeDeleteClick(scope.row.scene_id)}}},[_vm._v(\"删除\")])]}}])})],1)],1),_c('Config',{ref:\"configDialog\",on:{\"refresh\":_vm.refresh}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-dialog',{attrs:{\"close-on-click-modal\":false,\"visible\":_vm.config.show,\"title\":_vm.title},on:{\"update:visible\":function($event){return _vm.$set(_vm.config, \"show\", $event)}}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.config,\"rules\":_vm.rules,\"disabled\":_vm.config.type === 'look',\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"prop\":\"scene_name\",\"label\":\"场景名称\"}},[_c('el-input',{model:{value:(_vm.config.scene_name),callback:function ($$v) {_vm.$set(_vm.config, \"scene_name\", $$v)},expression:\"config.scene_name\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"list_pic.normal\",\"label\":\"列表配图\"}},[_c('el-input',{staticClass:\"hide\",model:{value:(_vm.config.list_pic.normal),callback:function ($$v) {_vm.$set(_vm.config.list_pic, \"normal\", $$v)},expression:\"config.list_pic.normal\"}}),_c('Upload',{class:{'is-disabled': _vm.config.type === 'look'},attrs:{\"image-file\":_vm.config.list_pic.normal,\"type\":_vm.config.type,\"valid\":_vm.validList,\"path\":\"scene/\"},on:{\"emitImageData\":_vm.emitListData}})],1),_c('el-form-item',{attrs:{\"prop\":\"detail_pic\",\"label\":\"详情页配图\"}},[_c('el-input',{staticClass:\"hide\",model:{value:(_vm.config.detail_pic),callback:function ($$v) {_vm.$set(_vm.config, \"detail_pic\", $$v)},expression:\"config.detail_pic\"}}),_c('Upload',{class:{'is-disabled': _vm.config.type === 'look'},attrs:{\"image-file\":_vm.config.detail_pic,\"type\":_vm.config.type,\"valid\":_vm.validDetail,\"path\":\"scene/\"},on:{\"emitImageData\":_vm.emitDetailData}})],1),_c('el-form-item',{attrs:{\"prop\":\"mode_id\",\"label\":\"启动模式\"}},[_c('el-select',{attrs:{\"clearable\":\"\",\"placeholder\":\"请选择\"},model:{value:(_vm.config.mode_id),callback:function ($$v) {_vm.$set(_vm.config, \"mode_id\", $$v)},expression:\"config.mode_id\"}},[_vm._l((_vm.startModeList),function(it){return [(+it.enable === 1)?_c('el-option',{key:it.mode_id,attrs:{\"label\":it.mode_name,\"value\":it.mode_id}}):_vm._e()]})],2)],1),_c('el-form-item',{attrs:{\"prop\":\"checkList\",\"label\":\"选择设备\"}},[_c('el-checkbox-group',{on:{\"change\":_vm.handleCheckedChange},model:{value:(_vm.config.checkList),callback:function ($$v) {_vm.$set(_vm.config, \"checkList\", $$v)},expression:\"config.checkList\"}},_vm._l((_vm.categoryList),function(it,index){return _c('div',{key:index,staticClass:\"item\"},[_c('el-checkbox',{attrs:{\"label\":it.category_id}},[_vm._v(\"选择\")]),_c('img',{staticClass:\"icon\",attrs:{\"src\":it.category_icon,\"alt\":\"\"}}),_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(it.category_name))]),_c('el-select',{attrs:{\"clearable\":\"\"},on:{\"change\":_vm.handleSelectChange},model:{value:(it.category_status),callback:function ($$v) {_vm.$set(it, \"category_status\", $$v)},expression:\"it.category_status\"}},_vm._l((it.status),function(i,idx){return _c('el-option',{key:idx,attrs:{\"label\":i,\"value\":idx}})}),1),_c('div',{staticClass:\"link\"},[_c('label',[_vm._v(\"预定链接:\")]),_c('el-input',{on:{\"change\":function($event){return _vm.reg(it, index)}},model:{value:(it.purchace_link),callback:function ($$v) {_vm.$set(it, \"purchace_link\", $$v)},expression:\"it.purchace_link\"}})],1)],1)}),0),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.judgeData === 'off'),expression:\"judgeData === 'off'\"}],staticClass:\"tis\"},[_vm._v(\"勾选的设备状态必填\")])],1),_c('el-form-item',{attrs:{\"label\":\"状态\"}},[_c('el-radio-group',{model:{value:(_vm.config.enable),callback:function ($$v) {_vm.$set(_vm.config, \"enable\", $$v)},expression:\"config.enable\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"启用\")]),_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"禁用\")])],1)],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.cancel}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"确 定\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-dialog\r\n    :close-on-click-modal=\"false\"\r\n    :visible.sync=\"config.show\"\r\n    :title=\"title\">\r\n    <el-form\r\n      ref=\"form\"\r\n      :model=\"config\"\r\n      :rules=\"rules\"\r\n      :disabled=\"config.type === 'look'\"\r\n      label-width=\"100px\">\r\n      <el-form-item\r\n        prop=\"scene_name\"\r\n        label=\"场景名称\">\r\n        <el-input v-model=\"config.scene_name\" />\r\n      </el-form-item>\r\n\r\n      <el-form-item\r\n        prop=\"list_pic.normal\"\r\n        label=\"列表配图\">\r\n        <el-input\r\n          v-model=\"config.list_pic.normal\"\r\n          class=\"hide\" />\r\n        <!-- Upload -->\r\n        <Upload\r\n          :class=\"{'is-disabled': config.type === 'look'}\"\r\n          :image-file=\"config.list_pic.normal\"\r\n          :type=\"config.type\"\r\n          :valid=\"validList\"\r\n          path= \"scene/\"\r\n          @emitImageData=\"emitListData\" />\r\n      </el-form-item>\r\n\r\n      <el-form-item\r\n        prop=\"detail_pic\"\r\n        label=\"详情页配图\">\r\n        <el-input\r\n          v-model=\"config.detail_pic\"\r\n          class=\"hide\" />\r\n        <!-- Upload -->\r\n        <Upload\r\n          :class=\"{'is-disabled': config.type === 'look'}\"\r\n          :image-file=\"config.detail_pic\"\r\n          :type=\"config.type\"\r\n          :valid=\"validDetail\"\r\n          path= \"scene/\"\r\n          @emitImageData=\"emitDetailData\"/>\r\n      </el-form-item>\r\n\r\n      <el-form-item\r\n        prop=\"mode_id\"\r\n        label=\"启动模式\">\r\n        <el-select\r\n          v-model=\"config.mode_id\"\r\n          clearable\r\n          placeholder=\"请选择\">\r\n          <template v-for=\"it in startModeList\">\r\n            <el-option\r\n              v-if=\"+it.enable === 1\"\r\n              :key=\"it.mode_id\"\r\n              :label=\"it.mode_name\"\r\n              :value=\"it.mode_id\" />\r\n          </template>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item\r\n        prop=\"checkList\"\r\n        label=\"选择设备\">\r\n\r\n        <el-checkbox-group\r\n          v-model=\"config.checkList\"\r\n          @change=\"handleCheckedChange\">\r\n          <div\r\n            v-for=\"(it, index) in categoryList\"\r\n            :key=\"index\"\r\n            class=\"item\">\r\n\r\n            <el-checkbox\r\n              :label=\"it.category_id\">选择</el-checkbox>\r\n\r\n            <img\r\n              :src=\"it.category_icon\"\r\n              class=\"icon\"\r\n              alt=\"\">\r\n            <span class=\"name\">{{ it.category_name }}</span>\r\n            <el-select\r\n              v-model=\"it.category_status\"\r\n              clearable\r\n              @change=\"handleSelectChange\">\r\n              <el-option\r\n                v-for=\"(i, idx) in it.status\"\r\n                :key=\"idx\"\r\n                :label=\"i\"\r\n                :value=\"idx\" />\r\n            </el-select>\r\n            <div class=\"link\">\r\n              <label>预定链接:</label>\r\n              <el-input\r\n                v-model=\"it.purchace_link\"\r\n                @change=\"reg(it, index)\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </el-checkbox-group>\r\n        <div\r\n          v-show=\"judgeData === 'off'\"\r\n          class=\"tis\">勾选的设备状态必填</div>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"状态\">\r\n        <el-radio-group v-model=\"config.enable\">\r\n          <el-radio :label=\"1\">启用</el-radio>\r\n          <el-radio :label=\"0\">禁用</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div\r\n      slot=\"footer\"\r\n      class=\"dialog-footer\">\r\n      <el-button @click=\"cancel\">取 消</el-button>\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"submit\">确 定</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n.item {\r\n  display: flex;\r\n  margin-bottom: 40px;\r\n  .icon {\r\n    margin: 0 10px;\r\n  }\r\n  .name {\r\n    margin: 0 20px;\r\n    font-size: 14px;\r\n  }\r\n  .link {\r\n    margin-left: 20px;\r\n    display: flex;\r\n    label {\r\n      font-size: 14px;\r\n      width: 100px;\r\n    }\r\n  }\r\n}\r\n.tis {\r\n    color: #f56c6c;\r\n    font-size: 12px;\r\n    line-height: 1;\r\n    padding-top: 4px;\r\n    position: absolute;\r\n    top: 100%;\r\n    left: 0;\r\n  }\r\n.hide {\r\n  display: none;\r\n}\r\n</style>\r\n<script>\r\nimport { PREFIX, deepClone } from '../../../lib/util'\r\n// import getCorsUrl from '../../../lib/corsconfig'\r\nimport Upload from '../../../components/upload.vue'\r\n// import { Message } from 'element-ui'\r\nexport default {\r\n  components: {\r\n    Upload\r\n  },\r\n  data () {\r\n    return {\r\n      validList: {\r\n        type: 2, // 验证图片尺寸\r\n        // width: 850,\r\n        // height: 450,\r\n        // tips: '尺寸：850*450， 支持jpg，png'\r\n        width: [1125, 1005, 670, 750],\r\n        height: [528, 471, 314, 352],\r\n        tips: '尺寸：1125*528，1005*471，670*314，750*352， 支持jpg，png'\r\n      },\r\n      validDetail: {\r\n        type: 2, // 验证图片尺寸\r\n        // width: 1123,\r\n        // height: 633,\r\n        // tips: '尺寸：1123*633， 支持jpg，png'\r\n        width: [1125, 1005, 670, 750],\r\n        height: [528, 471, 314, 352],\r\n        tips: '尺寸：1125*528，1005*471，670*314，750*352， 支持jpg，png'\r\n      },\r\n\r\n      categoryList: [],\r\n      startModeList: [],\r\n      judgeData: '', // 判断勾选的设备的状态是否有选择\r\n      // 配置内容\r\n      config: {\r\n        checkList: [],\r\n        content: {\r\n          list: []\r\n        },\r\n        list_pic: {\r\n          normal: '',\r\n          normal_object: ''\r\n        }\r\n      },\r\n      rules: {\r\n        scene_name: [\r\n          { required: true, message: '请输入场景名称', trigger: 'blur' }\r\n        ],\r\n        'list_pic.normal': [\r\n          { required: true, message: '请选择列表配图', trigger: 'change' }\r\n        ],\r\n        detail_pic: [\r\n          { required: true, message: '请选择详情页配图', trigger: 'change' }\r\n        ],\r\n        mode_id: [\r\n          { required: true, message: '请选择启动模式' }\r\n        ],\r\n        enable: [\r\n          { required: true, message: '请选择状态', trigger: 'change' }\r\n        ],\r\n        checkList: [\r\n          { type: 'array', required: true, message: '至少选择一个设备', trigger: 'change' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    title () {\r\n      let title = ''\r\n      switch (this.config.type) {\r\n        case 'add':\r\n          title = '添加场景'\r\n          break\r\n        case 'modify':\r\n          title = '编辑场景'\r\n          break\r\n        case 'look':\r\n          title = '查看场景'\r\n          break\r\n        default:\r\n          title = '查看场景'\r\n      }\r\n      return title\r\n    }\r\n  },\r\n  watch: {\r\n    'config.show' (val) {\r\n      this.$nextTick(() => {\r\n        this.$refs['form'].clearValidate()\r\n      })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCategoryList()\r\n    this.getStartModeList()\r\n  },\r\n  methods: {\r\n    reg (it, index) {\r\n      let val = it.purchace_link.trim()\r\n      this.categoryList[index].purchace_link = val\r\n    },\r\n    // 根据order排序\r\n    compare (property) {\r\n      return function (a, b) {\r\n        var value1 = a[property]\r\n        var value2 = b[property]\r\n        return value1 - value2\r\n      }\r\n    },\r\n    // 子组件传过来的 列表图片信息\r\n    emitListData (data) {\r\n      this.config.list_pic.normal = data.download_url\r\n      this.config.list_pic.normal_object = data.object\r\n    },\r\n    // 子组件传过来的 详情图片信息\r\n    emitDetailData (data) {\r\n      this.config.detail_pic = data.download_url\r\n      this.config.detail_pic_object = data.object\r\n    },\r\n    // 获取启动模式列表\r\n    getStartModeList () {\r\n      this.$http\r\n        .post(PREFIX + 'iotscenemode/lists', {})\r\n        .then(res => {\r\n          let orderList = res.data.result.list.sort(this.compare('order'))\r\n          this.startModeList = []\r\n          orderList.forEach(el => {\r\n            if (+el.enable === 1) {\r\n              this.startModeList.push(el)\r\n            }\r\n          })\r\n        })\r\n    },\r\n    // 获取设备分类列表\r\n    getCategoryList () {\r\n      this.$http\r\n        .post(PREFIX + 'iotscene/catelists', {})\r\n        .then(res => {\r\n          this.allList = res.data.result.list\r\n        })\r\n    },\r\n    // 处理分类设备选中状态\r\n    dealList () {\r\n      let allList = deepClone(this.allList)\r\n      if (this.config.type === 'add') {\r\n        this.categoryList = allList\r\n        this.config.checkList = []\r\n        this.config.enable = 0\r\n        return\r\n      }\r\n      let newArr = []\r\n      let arr = allList\r\n      let selectArr = this.config.content.list\r\n      arr.forEach(el => {\r\n        const result = selectArr.findIndex(ol => { return el.category_id === ol.category_id })\r\n        if (result === -1) { // 新的\r\n          newArr.push(el)\r\n        } else { // 已存在\r\n          el.category_status = selectArr[result].status === '-1' ? '' : selectArr[result].status + ''\r\n          el.purchace_link = selectArr[result].purchace_link\r\n          newArr.push(el)\r\n        }\r\n      })\r\n      this.categoryList = newArr\r\n      this.config.checkList = []\r\n      this.config.content.list.forEach(el => {\r\n        this.config.checkList.push(el.category_id)\r\n      })\r\n    },\r\n    cancel () {\r\n      this.config.show = false\r\n      this.judgeData = ''\r\n    },\r\n    // 点击确定按钮\r\n    submit () {\r\n      if (this.config.type === 'look') {\r\n        this.config.show = false\r\n        return\r\n      }\r\n\r\n      this.$refs['form'].validate((valid) => {\r\n        if (valid) {\r\n          let param = this.getParam()\r\n          if (this.judgeData === '') {\r\n            this.$http\r\n              .post(PREFIX + 'iotscene/save', param)\r\n              .then(res => {\r\n                this.$emit('refresh', true)\r\n                this.config.show = false\r\n              })\r\n          }\r\n        } else {\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    // 获取保存到后台的参数\r\n    getParam () {\r\n      let param = deepClone(this.config)\r\n      delete param['type']\r\n      delete param['show']\r\n      param.list_pic.normal = param.list_pic.normal_object\r\n      delete param['list_pic']['normal_object']\r\n\r\n      param.detail_pic = param.detail_pic_object\r\n      delete param['detail_pic_object']\r\n\r\n      param.content.list = []\r\n      this.config.checkList.forEach(el => {\r\n        Object.values(this.categoryList).forEach(val => {\r\n          if (val.category_id === el) {\r\n            let copyeEl = deepClone(val)\r\n\r\n            if (!copyeEl['category_status'] && copyeEl['category_status'] !== 0) {\r\n              copyeEl['status'] = -1\r\n            } else {\r\n              copyeEl['status'] = +copyeEl['category_status']\r\n            }\r\n\r\n            delete copyeEl['category_status']\r\n            param.content.list.push(copyeEl)\r\n          }\r\n        })\r\n      })\r\n      delete param['checkList']\r\n      delete param['mode_name']\r\n      return param\r\n    },\r\n    // 选择和取消设备\r\n    handleCheckedChange () {\r\n      // 对象属性改变，才会更新dom， 需创建新对象重新赋值\r\n      this.config = Object.assign({}, this.config)\r\n      this.judgmentMethod()\r\n    },\r\n    // 勾选设备的状态下拉框的回调\r\n    handleSelectChange () {\r\n      this.judgmentMethod()\r\n    },\r\n    // 设备验证的判断\r\n    judgmentMethod () {\r\n      let param = this.getParam()\r\n      let jud = ''\r\n      // 遍历勾选的设备是否有状态没选的\r\n      param.content.list.map(val => {\r\n        if (val.status === '-1') {\r\n          jud = 'off'\r\n        }\r\n      })\r\n      if (jud === 'off') {\r\n        this.judgeData = 'off'\r\n        return\r\n      }\r\n      this.judgeData = ''\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./config.vue?vue&type=template&id=0662b5a3&scoped=true&\"\nimport script from \"./config.vue?vue&type=script&lang=js&\"\nexport * from \"./config.vue?vue&type=script&lang=js&\"\nimport style0 from \"./config.vue?vue&type=style&index=0&id=0662b5a3&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0662b5a3\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"page-content\">\r\n    <!-- 顶部tab -->\r\n    <div class=\"filter\">\r\n      <span>场景管理</span>\r\n      <el-button\r\n        type=\"primary\"\r\n        @click=\"showConfig('add')\">添加场景</el-button>\r\n    </div>\r\n    <!-- 列表 -->\r\n    <div>\r\n      <el-table\r\n        :data=\"list\"\r\n        border>\r\n        <el-table-column\r\n          :index=\"indexMethod\"\r\n          type=\"index\"\r\n          label=\"序号\"\r\n          width=\"80\"/>\r\n        <el-table-column\r\n          prop=\"scene_name\"\r\n          label=\"场景名称\"/>\r\n        <el-table-column\r\n          prop=\"mode_name\"\r\n          label=\"启动方式\"/>\r\n        <el-table-column\r\n          prop=\"created_at\"\r\n          label=\"添加时间\"/>\r\n        <el-table-column\r\n          prop=\"enable\"\r\n          label=\"是否启用\">\r\n          <template slot-scope=\"scope\">\r\n            <span :class=\"scope.row.enable ? 'red':''\">{{ scope.row.enable ? '启用':'禁用' }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column\r\n          label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"showConfig('look', scope.row)\">查看</el-button>\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"showConfig('modify', scope.row)\">编辑</el-button>\r\n            <el-button\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"handeEnableClick(scope.$index,scope.row.enable)\">\r\n              {{ scope.row.enable ? '禁用':'启用' }}\r\n            </el-button>\r\n            <el-button\r\n              :disabled=\"scope.row.enable ? true:false\"\r\n              type=\"text\"\r\n              size=\"small\"\r\n              @click=\"handeDeleteClick(scope.row.scene_id)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n    </div>\r\n    <!-- <div class=\"block\">\r\n      <el-pagination\r\n        :total=\"+pages.total\"\r\n        :page-size=\"+pages.limit\"\r\n        :current-page=\"+pages.page\"\r\n        background\r\n        layout=\"prev, pager, next\"\r\n        @current-change=\"handPageChange\"/>\r\n    </div> -->\r\n    <!-- config -->\r\n    <Config\r\n      ref=\"configDialog\"\r\n      @refresh=\"refresh\"/>\r\n  </div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n.red{\r\n  color: #F56C6C;\r\n}\r\n.filter{\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 20px;\r\n}\r\n.block {\r\n  text-align: right;\r\n  margin: 30px 0;\r\n}\r\n</style>\r\n<script>\r\nimport { PREFIX, deepClone } from '../../lib/util'\r\nimport Config from './components/config.vue'\r\nexport default {\r\n  components: {\r\n    Config\r\n  },\r\n  data () {\r\n    return {\r\n      list: []\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    getList () {\r\n      this.$http\r\n        .post(PREFIX + 'iotscene/lists', {})\r\n        .then(res => {\r\n          this.list = res.data.result.list\r\n        })\r\n        .catch(res => {\r\n          if (res && res.msg) {\r\n            this.$message.error(res.msg)\r\n          } else {\r\n            this.$message.error(res)\r\n          }\r\n        })\r\n    },\r\n    submitEdit (param) {\r\n      this.$http\r\n        .post(PREFIX + 'iotscene/save', param)\r\n        .then(res => {\r\n          this.$message.info('操作成功')\r\n          this.getList()\r\n        })\r\n        .catch(res => {\r\n          if (res && res.msg) {\r\n            this.$message.error(res.msg)\r\n          } else {\r\n            this.$message.error(res)\r\n          }\r\n          this.getList()\r\n        })\r\n    },\r\n    delete (cId) {\r\n      this.$http\r\n        .post(PREFIX + 'iotscene/del', {\r\n          scene_id: cId\r\n        })\r\n        .then(res => {\r\n          this.$message.info('删除成功')\r\n          this.getList()\r\n        })\r\n        .catch(res => {\r\n          if (res && res.msg) {\r\n            this.$message.error(res.msg)\r\n          } else {\r\n            this.$message.error(res)\r\n          }\r\n        })\r\n    },\r\n    dealUpdateParam (index, enable) {\r\n      let param = deepClone(this.list[index])\r\n      param.enable = +!+enable\r\n      param.list_pic.normal = param.list_pic.normal_object\r\n      delete param['list_pic']['normal_object']\r\n      param.detail_pic = param.detail_pic_object\r\n      delete param['detail_pic_object']\r\n      return param\r\n    },\r\n    handeEnableClick (index, enable) {\r\n      let type = '禁用'\r\n      if (!enable) {\r\n        type = '启用'\r\n      }\r\n      this.$confirm(`您是否确定${type}该场景？`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        let param = this.dealUpdateParam(index, enable)\r\n        this.submitEdit(param)\r\n      }).catch(() => {\r\n        this.$message.info('已取消')\r\n      })\r\n    },\r\n    handeDeleteClick (cId) {\r\n      this.$confirm(`您是否确定删除该场景？`, '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.delete(cId)\r\n      }).catch(() => {\r\n        this.$message.info('已取消')\r\n      })\r\n    },\r\n    handPageChange (val) {\r\n      this.pages.page = val\r\n      this.getList()\r\n    },\r\n    indexMethod (index) {\r\n      return index + 1\r\n    },\r\n    showConfig (type, item) {\r\n      let defaultConfig = {\r\n        type: type,\r\n        show: true,\r\n        scene_name: '',\r\n        list_pic: {\r\n          normal: ''\r\n        },\r\n        detail_pic: '',\r\n        mode_id: '',\r\n        enable: 1,\r\n        content: {\r\n          list: []\r\n        }\r\n      }\r\n      if (type === 'add') {\r\n        console.log(type)\r\n        console.log(defaultConfig)\r\n        this.$refs.configDialog.config = defaultConfig\r\n      } else {\r\n        this.$refs.configDialog.config = Object.assign({}, defaultConfig, item)\r\n      }\r\n      // 处理分类设备选中状态\r\n      this.$refs.configDialog.dealList()\r\n    },\r\n    // 子组件传过来的 列表图片信息\r\n    refresh (val) {\r\n      if (val) this.getList()\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sceneAdmin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sceneAdmin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./sceneAdmin.vue?vue&type=template&id=01b84cfa&scoped=true&\"\nimport script from \"./sceneAdmin.vue?vue&type=script&lang=js&\"\nexport * from \"./sceneAdmin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./sceneAdmin.vue?vue&type=style&index=0&id=01b84cfa&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"01b84cfa\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.corsUrls,\"show-file-list\":false,\"on-success\":_vm.handleAvatarSuccess,\"data\":_vm.uploadObj,\"before-upload\":_vm.beforeAvatarUpload}},[(_vm.imageFile)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageFile}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"}),_c('i',{staticClass:\"clear el-icon-remove\",on:{\"click\":function($event){$event.stopPropagation();return _vm.clearImg($event)}}})]),_c('div',{staticClass:\"tips\"},[_vm._v(\" \"+_vm._s(_vm.valid.tips)+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-upload\r\n      :action=\"corsUrls\"\r\n      :show-file-list=\"false\"\r\n      :on-success=\"handleAvatarSuccess\"\r\n      :data=\"uploadObj\"\r\n      :before-upload=\"beforeAvatarUpload\"\r\n      class=\"avatar-uploader\"\r\n    >\r\n      <img\r\n        v-if=\"imageFile\"\r\n        :src=\"imageFile\"\r\n        class=\"avatar\"\r\n      >\r\n      <i\r\n        v-else\r\n        class=\"el-icon-plus avatar-uploader-icon\"\r\n      />\r\n      <i\r\n        class=\"clear el-icon-remove\"\r\n        @click.stop=\"clearImg\"\r\n      />\r\n    </el-upload>\r\n    <div class=\"tips\">\r\n      <!-- 只能上传jpg/png格式文件，单个文件不能超过500kb -->\r\n      {{ valid.tips }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport getCorsUrl from '../lib/corsconfig.js'\r\nexport default {\r\n  props: ['imageFile', 'type', 'valid', 'path'],\r\n  data () {\r\n    let uploadObj = {\r\n      token: JSON.parse(localStorage.getItem('localData')).user.info.token\r\n    }\r\n    if (this.path) {\r\n      uploadObj.path = this.path\r\n    }\r\n    return {\r\n      corsUrls: getCorsUrl() + '/oss_file_upload',\r\n      uploadObj: uploadObj\r\n    }\r\n  },\r\n  methods: {\r\n    handleAvatarSuccess (val) {\r\n      this.$emit('emitImageData', val.result)\r\n    },\r\n    beforeAvatarUpload (file) {\r\n      const isType = (file.type === 'image/jpeg') || (file.type === 'image/png')\r\n      if (this.valid.type === '1') {\r\n        const isLt2M = file.size / 1024 < 500\r\n        if (!isType) {\r\n          this.$message.error('只能上传jpg或者png格式!')\r\n        }\r\n        if (!isLt2M) {\r\n          this.$message.error('大小不能超过 500kb!')\r\n        }\r\n        return isType && isLt2M\r\n      } else if (this.valid.type === '2') {\r\n        const isSize = new Promise((resolve, reject) => {\r\n          let width = this.valid.width // 限制图片尺寸为654X270\r\n          let height = this.valid.height\r\n          let _URL = window.URL || window.webkitURL\r\n          let img = new Image()\r\n          img.onload = function () {\r\n            let valid = (img.width === width[0] ? width[0] : '' || img.width === width[1] ? width[1] : '' || img.width === width[2] ? width[2] : '') && (img.height === height[0] ? height[0] : '' || img.height === height[1] ? height[1] : '' || img.height === height[2] ? height[2] : '')\r\n            valid ? resolve() : reject(new Error('错误'))\r\n          }\r\n          img.src = _URL.createObjectURL(file)\r\n        }).then(() => {\r\n          return file\r\n        }, () => {\r\n          this.$message.error(`图片尺寸限制为${this.valid.width[0] ? this.valid.width[0] + ' x ' : ''}${this.valid.height[0] ? this.valid.height[0] : ''}${this.valid.width[1] ? '，' + this.valid.width[1] + ' x ' : ''}${this.valid.height[1] ? this.valid.height[1] : ''}${this.valid.width[2] ? '，' + this.valid.width[2] + ' x ' : ''}${this.valid.height[2] ? this.valid.height[2] : ''}`)\r\n          return Promise.reject(new Error('错误'))\r\n        })\r\n        return isType && isSize\r\n      } else {\r\n        return true\r\n      }\r\n    },\r\n    clearImg () {\r\n      if (this.$props.type === 'look') {\r\n        return false\r\n      } else {\r\n        this.$emit('emitImageData', {})\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\">\r\n  .avatar-uploader .el-upload {\r\n    border: 1px dashed #d9d9d9;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    position: relative;\r\n    .clear {\r\n      position: absolute;\r\n      top: 0;\r\n      right: -20px;\r\n    }\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409eff;\r\n\r\n  }\r\n  .avatar-uploader-icon {\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n  .tips {\r\n    color: #999;\r\n  }\r\n\r\n  .is-disabled .avatar-uploader-icon{\r\n    background-color: #f5f7fa;\r\n    border-color: #e4e7ed;\r\n    color: #c0c4cc;\r\n    cursor: not-allowed;\r\n  }\r\n  .is-disabled .el-upload:hover{\r\n    cursor: not-allowed;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload.vue?vue&type=template&id=0a823aa8&\"\nimport script from \"./upload.vue?vue&type=script&lang=js&\"\nexport * from \"./upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload.vue?vue&type=style&index=0&lang=less&\"","module.exports = (__webpack_require__(\"1c0f\"))(336);","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sceneAdmin.vue?vue&type=style&index=0&id=01b84cfa&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sceneAdmin.vue?vue&type=style&index=0&id=01b84cfa&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config.vue?vue&type=style&index=0&id=0662b5a3&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./config.vue?vue&type=style&index=0&id=0662b5a3&lang=less&scoped=true&\""],"sourceRoot":""}