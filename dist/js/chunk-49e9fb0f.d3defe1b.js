(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-49e9fb0f"],{"01d2":function(t,e,a){"use strict";function r(t){return 1===(t+="").length?"0"+t:t}function i(t){return t.getFullYear()+"-"+r(t.getMonth()+1)+"-"+r(t.getDate())}a.r(e);var n=a("9218"),o=a("bc3a"),s=a.n(o),l=a("46f1"),c={components:{CityPicker:n.a},data:function(){return{area:"",formdata:{date:"",platform:"",province:"",city:""},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;e.setTime(e.getTime()-864e5),a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;e.setTime(e.getTime()-864e5),a.setTime(a.getTime()-26784e5),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;e.setTime(e.getTime()-864e5),a.setTime(a.getTime()-80352e5),t.$emit("pick",[a,e])}}]},operFamilyCategoryCharData:{columns:["category_title","family_num"],rows:[]},operFamilyCategoryRateCharData:{columns:["category_title","family_rate"],rows:[]},operStatCharData:{columns:["category_title","oper_num"],rows:[]},chartSettings1:{type:"histogram",labelMap:{family_num:"户数"}},chartSettings2:{yAxisType:["percent"],type:"histogram",labelMap:{family_rate:"比重"}},chartSettings3:{type:"histogram",labelMap:{oper_num:"次数"}},chartExtend1:{series:{barWidth:40,itemStyle:{normal:{label:{show:!0,position:"top"}}}}},chartExtend2:{series:{barWidth:40,itemStyle:{normal:{label:{show:!0,position:"top",formatter:function(t){return 100*("line"===t.componentSubType?t.value[1]:t.value)+"%"}}}}}},chartExtend3:{series:{barWidth:40,itemStyle:{normal:{label:{show:!0,position:"top"}}}}},showFamilyCategoryEmpty:!1,showFamilyCategoryRateEmpty:!1,showStatEmpty:!1}},mounted:function(){var t=new Date,e=new Date;t.setTime(t.getTime()-864e5),e.setTime(e.getTime()-2592e6),this.formdata.date=[e,t],this.getDeviceAnalyzeData({start_date:i(e),end_date:i(t),city:""})},methods:{onCitySelect:function(t){this.formdata.province=t[0],this.formdata.city=t[1]},search:function(){var t=this.formdata,e=t.date,a=t.platform,r=t.province,n=t.city;this.getDeviceAnalyzeData({start_date:i(e[0]),end_date:i(e[1]),province:r,city:n,os_type:a||"",app_version:""})},getDeviceAnalyzeData:function(t){var e=this;s.a.all([this.getOperFamilyCategoryData(t),this.getOperStatData(t)]).then(s.a.spread((function(t,a){e.operFamilyCategoryCharData.rows=t.data.result.list||[],e.showFamilyCategoryEmpty=!e.operFamilyCategoryCharData.rows.length,e.operFamilyCategoryRateCharData.rows=t.data.result.list||[],e.showFamilyCategoryRateEmpty=!e.operFamilyCategoryRateCharData.rows.length,e.operStatCharData.rows=a.data.result.list||[],e.showStatEmpty=!e.operStatCharData.rows.length})))},getOperFamilyCategoryData:function(t){return s.a.post(l.u,t)},getOperStatData:function(t){return s.a.post(l.v,t)},changeCharType:function(t,e){this[t].type=e}}},p=(a("7215"),a("2877")),m=Object(p.a)(c,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content config-page"},[a("el-row",[a("el-col",[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-date-picker",{attrs:{clearable:!1,"picker-options":t.pickerOptions,placeholder:"请选择时间段",type:"daterange",align:"left","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.formdata.date,callback:function(e){t.$set(t.formdata,"date",e)},expression:"formdata.date"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择平台"},model:{value:t.formdata.platform,callback:function(e){t.$set(t.formdata,"platform",e)},expression:"formdata.platform"}},[a("el-option",{attrs:{label:"Android_Pad",value:"Android_Pad"}}),a("el-option",{attrs:{label:"IOS",value:"IOS"}}),a("el-option",{attrs:{label:"Android",value:"Android"}}),a("el-option",{attrs:{label:"IOS_Pad",value:"IOS_Pad"}}),a("el-option",{attrs:{label:"合计",value:""}})],1)],1),a("el-form-item",[a("city-picker",{on:{change:t.onCitySelect}})],1),a("el-form-item",{staticStyle:{"margin-bottom":"0"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v(" 查询 ")])],1)],1)],1)],1),a("div",{staticStyle:{margin:"20px"}},[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:16}},[a("div",[a("span",[t._v("控制设备家庭户数")]),a("span",{staticClass:"type-icon",class:["histogram"===t.chartSettings1.type?"histogram-active":"histogram"],on:{click:function(e){return t.changeCharType("chartSettings1","histogram")}}}),a("span",{staticClass:"type-icon",class:["line"===t.chartSettings1.type?"line-active":"line"],on:{click:function(e){return t.changeCharType("chartSettings1","line")}}})]),a("div",[t._v("单位: 户")])])],1),a("ve-chart",{attrs:{"data-empty":t.showFamilyCategoryEmpty,"legend-visible":!1,data:t.operFamilyCategoryCharData,extend:t.chartExtend1,settings:t.chartSettings1}})],1)],1),a("div",{staticStyle:{margin:"20px"}},[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:16}},[a("div",[a("span",[t._v("控制设备家庭比重")]),a("span",{staticClass:"type-icon",class:["histogram"===t.chartSettings2.type?"histogram-active":"histogram"],on:{click:function(e){return t.changeCharType("chartSettings2","histogram")}}}),a("span",{staticClass:"type-icon",class:["line"===t.chartSettings2.type?"line-active":"line"],on:{click:function(e){return t.changeCharType("chartSettings2","line")}}})]),a("div",[t._v("单位: %")])])],1),a("ve-chart",{attrs:{"data-empty":t.showFamilyCategoryRateEmpty,"legend-visible":!1,data:t.operFamilyCategoryRateCharData,extend:t.chartExtend2,settings:t.chartSettings2}})],1)],1),a("div",{staticStyle:{margin:"20px"}},[a("el-card",{attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:24}},[a("el-col",{attrs:{span:16}},[a("div",[a("span",[t._v("控制设备次数")]),a("span",{staticClass:"type-icon",class:["histogram"===t.chartSettings3.type?"histogram-active":"histogram"],on:{click:function(e){return t.changeCharType("chartSettings3","histogram")}}}),a("span",{staticClass:"type-icon",class:["line"===t.chartSettings3.type?"line-active":"line"],on:{click:function(e){return t.changeCharType("chartSettings3","line")}}})]),a("div",[t._v("单位: 次")])])],1),a("ve-chart",{attrs:{"data-empty":t.showStatEmpty,"legend-visible":!1,data:t.operStatCharData,extend:t.chartExtend3,settings:t.chartSettings3}})],1)],1)],1)}),[],!1,null,"7749ea96",null);e.default=m.exports},7215:function(t,e,a){"use strict";var r=a("bfd4");a.n(r).a},bfd4:function(t,e,a){}}]);