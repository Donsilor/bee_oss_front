(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-42f6b11b"],{5567:function(t,e,n){},"5aa7":function(t,e,n){"use strict";n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b");var r=n("ade3"),a=n("1e04"),i=n("46f1");function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var s="/api.php";e["a"]={agreementSave:function(t){return a["a"].post(i["m"].agreementSave,t).then((function(t){return t.data}))},agreementdel:function(t){return a["a"].post(i["m"].agreementdel,t).then((function(t){return t.data}))},pubilcCorsAction:function(t){return a["a"].post(s,t).then((function(t){return t.data}))},getVersions:function(t){return t.method="list_versions",a["a"].post(s,t).then((function(t){return t.data}))},getVersionsForSC:function(t){return t.method="list_versions_community",a["a"].post(s,t).then((function(t){return t.data}))},selectVersion:function(t){return a["a"].post(i["m"].selectVersion,t).then((function(t){return t.data}))},pushUpdateAction:function(t){return a["a"].post(i["m"].pushUpdateAction,t).then((function(t){return t.data}))},getPushHistoryList:function(t){return a["a"].post(i["m"].getPushHistoryList,t).then((function(t){return t.data}))},getChoseList:function(t){return a["a"].post(s,t).then((function(t){return t.data}))},getAgreementList:function(t){return a["a"].post(i["m"].agreementList,t).then((function(t){return t.data}))},getAppList:function(t){return a["a"].post(s,u({method:"list_applications"},t))},getAppInfo:function(t){return a["a"].post(s,u({method:"info_applications"},t))},delApp:function(t){return a["a"].post(s,u({method:"del_applications"},t))},saveApp:function(t){return a["a"].post(s,u({method:"save_applications"},t))},getAppVerList:function(t){return a["a"].post(s,u({method:"list_versions_commom"},t))},getAppVerInfo:function(t){return a["a"].post(s,u({method:"info_versions_commom"},t))},delAppVer:function(t){return a["a"].post(s,u({method:"del_version_commom"},t))},saveAppVer:function(t){return a["a"].post(s,u({method:"save_app_version_commom"},t))},setAppVerStatus:function(t){return a["a"].post(s,u({method:"set_status_commom"},t))},setAppVerUuids:function(t){return a["a"].post(s,u({method:"set_uuids_commom"},t))},getAppVerUuids:function(t){return a["a"].post(s,u({method:"get_uuids_commom"},t))}}},"74e0":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content ops-page"},[n("div",{staticStyle:{"padding-bottom":"30px"}},[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:18}},[n("el-input",{staticClass:"searchInput",attrs:{maxlength:11,type:"text",placeholder:"输入用户手机号码"},model:{value:t.searchMobile,callback:function(e){t.searchMobile=e},expression:"searchMobile"}}),n("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v(" 查询 ")])],1),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[n("el-button",{on:{click:function(e){t.addMuser=!0}}},[t._v(" 新增 ")])],1)],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("muser-list",{attrs:{"data-changed":t.dataChanged,"search-mobile":t.searchMobile}})],1),n("div",[n("muser-add",{attrs:{"dialog-visible":t.addMuser,"data-changed":t.dataChanged},on:{setDataChanged:t.changeData,setDialog:t.closeDialog}})],1)],1)])},a=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.muserList,(function(e){return n("div",{key:e.id,staticStyle:{"margin-top":"30px"}},[n("div",{staticClass:"tab-header"},[n("div",{staticClass:"header-item"},[t._v(" 姓名: "+t._s(e.name)+" ")]),n("div",{staticClass:"header-item header-item-2"},[t._v(" 手机号码: "+t._s(e.phone)+" ")]),n("div",{staticClass:"header-item header-item-3"},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.handleDelete(e.id)}}},[t._v(" 删除 ")])],1)]),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.familyList,border:""}},[n("el-table-column",{attrs:{prop:"isOnline",label:"路由器在线与否",width:"150"}}),t._l(t.types,(function(t){return n("el-table-column",{key:t.id,attrs:{prop:t.name,label:t.text}})}))],2)],1)})),n("div",{staticClass:"page-line"},[n("el-pagination",{attrs:{total:t.config.total,"page-size":t.config.pageSize,"current-page":t.config.page,small:"",layout:"prev, pager, next"},on:{"update:currentPage":function(e){return t.$set(t.config,"page",e)},"update:current-page":function(e){return t.$set(t.config,"page",e)},"current-change":t.onPageChange}})],1)],2)},o=[],u=n("8e44"),s=(n("4de4"),n("d81d"),n("b64b"),n("e25e"),{pageSize:20}),c=s,d=function(t){return{page:t.current_page,pageSize:c.pageSize,total:t.total}},l=function(t){var e=[];return t.map((function(t){var n={id:t.user_id,name:t.user_name,phone:t.phone,familyList:[],familyCount:t.family_list.length};t.family_list.map((function(e){var r={isOnline:e.router_online?"在线":"离线",total:0,name:t.user_name,phone:t.phone};e.device_list.length>0&&e.device_list.map((function(t){r["type".concat(t.category_id)]=t.num,parseInt(t.num)>0&&(r.total+=parseInt(t.num))})),n.familyList.push(r)})),e.push(n)})),e},f=function(t){var e=[],n={},r=t.filter((function(t){return t.family_list.length>0}));return r.map((function(t){t.family_list.map((function(t){t.device_list.length>0&&t.device_list.map((function(t){n[t.category_id]||""===n[t.category_id]||(n[t.category_id]=t.category_name)}))}))})),Object.keys(n).map((function(t){e.push({id:t,name:"type".concat(t),text:n[t]})})),e.push({id:"heji",name:"total",text:"合计"}),e},p={name:"MuserList",props:["dataChanged","searchMobile"],data:function(){return{muserList:[],types:[],config:{}}},watch:{dataChanged:function(t,e){t!==e&&this.getMUserList(this.searchMobile)}},mounted:function(){this.getMUserList()},methods:{getMUserList:function(){var t=this;u["a"].getMUserList({mobile:11===this.searchMobile.length?this.searchMobile:null,page:this.config.page,limit:this.config.pageSize}).then((function(e){e=e.data.result,t.muserList=l(e.data),t.types=f(e.data),t.config=d(e)}))},onPageChange:function(t){this.getMUserList()},handleDelete:function(t){var e=this;this.$confirm("确定删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n=[t];u["a"].deleteMUser(JSON.stringify(n)).then((function(t){e.$message("删除成功!"),e.getMUserList()}))})).catch((function(){}))}}},g=p,h=(n("7f92"),n("2877")),m=Object(h["a"])(g,i,o,!1,null,"244f62ea",null),b=m.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.dialogTitle,visible:t.showDialog},on:{"update:visible":function(e){t.showDialog=e}}},[n("el-form",{attrs:{model:t.formdata,rules:t.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"手机号码",prop:"tel"}},[n("el-input",{model:{value:t.formdata.tel,callback:function(e){t.$set(t.formdata,"tel",e)},expression:"formdata.tel"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.closeDialog}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.formSubmit}},[t._v("确 定")])],1)],1)},v=[],_={props:["dialogVisible","dataChanged"],data:function(){return{formdata:{name:"",tel:""},rules:{tel:[{required:!0,message:"请输入电话",trigger:"blur"}]},dialogTitle:"新增重点用户",showDialog:this.dialogVisible}},watch:{dialogVisible:function(t){this.showDialog=t}},methods:{formSubmit:function(){var t=this,e=this.formdata;u["a"].addMUser({phone_num:e.tel}).then((function(e){t.$message("添加成功"),t.$emit("setDataChanged"),t.closeDialog()}))},closeDialog:function(){this.showDialog=!1,this.$emit("setDialog",!1)}}},O=_,D=Object(h["a"])(O,y,v,!1,null,null,null),L=D.exports,S={components:{muserList:b,muserAdd:L},data:function(){return{searchMobile:"",addMuser:!1,dataChanged:0}},methods:{search:function(){this.searchMobile?this.dataChanged++:this.$message.error("请输入手机号码")},closeDialog:function(){this.addMuser=!1},changeData:function(){this.dataChanged++}}},U=S,w=Object(h["a"])(U,r,a,!1,null,null,null);e["default"]=w.exports},"7f92":function(t,e,n){"use strict";var r=n("5567"),a=n.n(r);a.a},"8e44":function(t,e,n){"use strict";n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b");var r=n("ade3"),a=n("1e04"),i=n("46f1"),o={searchUserList:function(t){return a["a"].post(i["i"].searchUserList,t)},userList:function(t){return a["a"].post(i["i"].userList,t)},getUser:function(t){return a["a"].post(i["i"].getUser,t)},addUser:function(t){return a["a"].post(i["i"].addUser,t)},editUser:function(t){return a["a"].post(i["i"].editUser,t)},deleteUser:function(t){return a["a"].post(i["i"].deleteUser,{user_ids:t})},updatePwd:function(t){return a["a"].post(i["i"].updatePwd,t)},resetPwd:function(t){return a["a"].post(i["i"].resetPwd,t)},roleList:function(t){return a["a"].post(i["i"].roleList,t)},getRole:function(t){return a["a"].post(i["i"].getRole,{role_id:t})},addRole:function(t){return a["a"].post(i["i"].addRole,t)},editRole:function(t){return a["a"].post(i["i"].editRole,t)},deleteRole:function(t){return a["a"].post(i["i"].deleteRole,{role_id:t})},menuList:function(){return a["a"].post(i["i"].menuList)}},u=o,s=n("9a1b");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var l={getOnlineUser:function(t){return a["a"].post("".concat(i["c"],"analyzer/online_user"),t)},getRegisterUser:function(t){return a["a"].post("".concat(i["c"],"analyzer/register_user"),t)},getActiveUser:function(t){return a["a"].post("".concat(i["c"],"analyzer/active_user"),t)},getActivePercent:function(t){return a["a"].post("".concat(i["c"],"analyzer/active_percent"),t)},getLoginUser:function(t){return a["a"].post("".concat(i["c"],"analyzer/login_user"),t)}};Object.assign(l,{getUserAnalyzeData:function(t){var e=d({},t,{province:"",city:""});return a["a"].all([l.getOnlineUser(t),l.getRegisterUser(e),l.getActiveUser(t),l.getLoginUser(t)])}});var f=l,p={getMUserList:function(t){return a["a"].post("".concat(i["c"],"iotuser/muserlist"),t)},addMUser:function(t){return a["a"].post("".concat(i["c"],"iotuser/savemuser"),t)},deleteMUser:function(t){return a["a"].post("".concat(i["c"],"iotuser/delmuser"),{user_ids:t})}},g={CmDataList:function(t){return a["a"].post(i["d"].CmDataList,t).then((function(t){return t.data}))},CmDataAdd:function(t){return a["a"].post(i["d"].CmDataAdd,t).then((function(t){return t.data}))},CmDataEdit:function(t){return a["a"].post(i["d"].CmDataEdit,t).then((function(t){return t.data}))},CmDataDel:function(t){return a["a"].post(i["d"].CmDataDel,t).then((function(t){return t.data}))},ModuleList:function(t){return a["a"].post(i["d"].ModuleList,t).then((function(t){return t.data}))},input:function(t){return a["a"].post(i["d"].input,t).then((function(t){return t.data}))}},h={imgList:function(t){return a["a"].post(i["g"].imgList,t).then((function(t){return t.data}))},addImgs:function(t){return a["a"].post(i["g"].addImgs,t).then((function(t){return t.data}))},deleteImgs:function(t){return a["a"].post(i["g"].deleteImgs,t).then((function(t){return t.data}))},editImgs:function(t){return a["a"].post(i["g"].editImgs,t).then((function(t){return t.data}))},sortImgs:function(t){return a["a"].post(i["g"].sortImgs,t).then((function(t){return t.data}))}},m={searchUserList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return a["a"].post(i["h"].userList,{phone_num:t,begin:e,size:n})},searchUserMsg:function(t){return a["a"].post(i["h"].searchUserMsg,t).then((function(t){return t.data.result}))},searchLogOut:function(t){return a["a"].post(i["h"].searchLogOut,t).then((function(t){return t.data.result}))},operaList:function(t){return a["a"].post(i["h"].operaList,t).then((function(t){return t.data.result}))},rootLogs:function(t){return a["a"].post(i["h"].rootLogs,t).then((function(t){return t.data.result}))},errLogs:function(t){return a["a"].post(i["h"].errLogs,t).then((function(t){return t.data.result}))},deviceLogs:function(t){return a["a"].post(i["h"].deviceLogs,t).then((function(t){return t.data.result}))},throughDatas:function(t){return a["a"].post(i["l"].throughDatas,t).then((function(t){return t.data.result}))},deviceTotals:function(t){return a["a"].post(i["l"].deviceTotal,t).then((function(t){return t.data.result}))},onlineLogs:function(t){return a["a"].post(i["l"].onlineLog,t).then((function(t){return t.data.result}))},logRegDatas:function(t){return a["a"].post(i["l"].logRegData,t).then((function(t){return t.data.result}))},qpsDatas:function(t){return a["a"].post(i["l"].qpsData,t).then((function(t){return t.data.result}))},getwarnDatas:function(t){return a["a"].post(i["l"].warnData,t).then((function(t){return t.data.result}))},getwarnDataList:function(t){return a["a"].post(i["l"].warnDataSearch,t).then((function(t){return t.data.result}))},routerList:function(t){return a["a"].post(i["h"].routerList,t).then((function(t){return t.data.result}))},cancelBindRouterList:function(t){return a["a"].post(i["h"].bindedlists,t).then((function(t){return t.data.result}))},cancelBind:function(t){return a["a"].post(i["h"].routerUnbind,t).then((function(t){return t.data.result}))},addRouter:function(t){return a["a"].post(i["h"].addRouter,t).then((function(t){return t.data.result}))},editRouter:function(t){return a["a"].post(i["h"].editRouter,t).then((function(t){return t.data}))},deleteRouter:function(t){return a["a"].post(i["h"].deleteRouter,t).then((function(t){return t.data}))},importRouter:function(t){return a["a"].post(i["h"].importRouter,t).then((function(t){return t.data.result}))},getFamilyList:function(t){return a["a"].post(i["h"].familyList,t).then((function(t){return t.data}))},directdeviceList:function(t){return a["a"].post(i["h"].directdeviceList,t).then((function(t){return t.data.result}))},addDirectdevice:function(t){return a["a"].post(i["h"].addDirectdevice,t).then((function(t){return t.data.result}))},editDirectdevice:function(t){return a["a"].post(i["h"].editDirectdevice,t).then((function(t){return t.data}))},deleteDirectdevice:function(t){return a["a"].post(i["h"].deleteDirectdevice,t).then((function(t){return t.data}))},importDirectdevice:function(t){return a["a"].post(i["h"].importDirectdevice,t).then((function(t){return t.data.result}))}},b={strategyList:function(t){return a["a"].post(i["k"].strategyList,t).then((function(t){return t.data}))},StrategyAdd:function(t){return a["a"].post(i["k"].StrategyAdd,t).then((function(t){return t.data}))},StrategyEdit:function(t){return a["a"].post(i["k"].StrategyEdit,t).then((function(t){return t.data}))},StrategyDel:function(t){return a["a"].post(i["k"].StrategyDel,t).then((function(t){return t.data}))},StrategyUuidList:function(t){return a["a"].post(i["k"].StrategyUuidList,t).then((function(t){return t.data}))},StrategyUuidAdd:function(t){return a["a"].post(i["k"].StrategyUuidAdd,t).then((function(t){return t.data}))},StrategyUuidEdit:function(t){return a["a"].post(i["k"].StrategyUuidEdit,t).then((function(t){return t.data}))},StrategyUuidDel:function(t){return a["a"].post(i["k"].StrategyUuidDel,t).then((function(t){return t.data}))},StrategyConfiglists:function(t){return a["a"].post(i["k"].StrategyConfiglists,t).then((function(t){return t.data}))},StrategyConfigAdd:function(t){return a["a"].post(i["k"].StrategyConfigAdd,t).then((function(t){return t.data}))},StrategyConfigEdit:function(t){return a["a"].post(i["k"].StrategyConfigEdit,t).then((function(t){return t.data}))},StrategyConfigDel:function(t){return a["a"].post(i["k"].StrategyConfigDel,t).then((function(t){return t.data}))}},y=n("5aa7");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["a"]=_({},u,{},s["a"],{},f,{},p,{},g,{},h,{},m,{},b,{},y["a"])},b64b:function(t,e,n){t.exports=n("1c0f")(313)},dbb4:function(t,e,n){t.exports=n("1c0f")(306)},e25e:function(t,e,n){t.exports=n("1c0f")(390)},e439:function(t,e,n){t.exports=n("1c0f")(305)}}]);
//# sourceMappingURL=chunk-42f6b11b.9e2efa42.js.map