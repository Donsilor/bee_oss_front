(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e007004c"],{"5aa7":function(t,e,n){"use strict";n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b");var r=n("ade3"),a=n("1e04"),o=n("46f1");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var s="/api.php";e["a"]={agreementSave:function(t){return a["a"].post(o["m"].agreementSave,t).then((function(t){return t.data}))},agreementdel:function(t){return a["a"].post(o["m"].agreementdel,t).then((function(t){return t.data}))},pubilcCorsAction:function(t){return a["a"].post(s,t).then((function(t){return t.data}))},getVersions:function(t){return t.method="list_versions",a["a"].post(s,t).then((function(t){return t.data}))},getVersionsForSC:function(t){return t.method="list_versions_community",a["a"].post(s,t).then((function(t){return t.data}))},selectVersion:function(t){return a["a"].post(o["m"].selectVersion,t).then((function(t){return t.data}))},pushUpdateAction:function(t){return a["a"].post(o["m"].pushUpdateAction,t).then((function(t){return t.data}))},getPushHistoryList:function(t){return a["a"].post(o["m"].getPushHistoryList,t).then((function(t){return t.data}))},getChoseList:function(t){return a["a"].post(s,t).then((function(t){return t.data}))},getAgreementList:function(t){return a["a"].post(o["m"].agreementList,t).then((function(t){return t.data}))},getAppList:function(t){return a["a"].post(s,u({method:"list_applications"},t))},getAppInfo:function(t){return a["a"].post(s,u({method:"info_applications"},t))},delApp:function(t){return a["a"].post(s,u({method:"del_applications"},t))},saveApp:function(t){return a["a"].post(s,u({method:"save_applications"},t))},getAppVerList:function(t){return a["a"].post(s,u({method:"list_versions_commom"},t))},getAppVerInfo:function(t){return a["a"].post(s,u({method:"info_versions_commom"},t))},delAppVer:function(t){return a["a"].post(s,u({method:"del_version_commom"},t))},saveAppVer:function(t){return a["a"].post(s,u({method:"save_app_version_commom"},t))},setAppVerStatus:function(t){return a["a"].post(s,u({method:"set_status_commom"},t))},setAppVerUuids:function(t){return a["a"].post(s,u({method:"set_uuids_commom"},t))},getAppVerUuids:function(t){return a["a"].post(s,u({method:"get_uuids_commom"},t))}}},"8e44":function(t,e,n){"use strict";n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("159b");var r=n("ade3"),a=n("1e04"),o=n("46f1"),i={searchUserList:function(t){return a["a"].post(o["i"].searchUserList,t)},userList:function(t){return a["a"].post(o["i"].userList,t)},getUser:function(t){return a["a"].post(o["i"].getUser,t)},addUser:function(t){return a["a"].post(o["i"].addUser,t)},editUser:function(t){return a["a"].post(o["i"].editUser,t)},deleteUser:function(t){return a["a"].post(o["i"].deleteUser,{user_ids:t})},updatePwd:function(t){return a["a"].post(o["i"].updatePwd,t)},resetPwd:function(t){return a["a"].post(o["i"].resetPwd,t)},roleList:function(t){return a["a"].post(o["i"].roleList,t)},getRole:function(t){return a["a"].post(o["i"].getRole,{role_id:t})},addRole:function(t){return a["a"].post(o["i"].addRole,t)},editRole:function(t){return a["a"].post(o["i"].editRole,t)},deleteRole:function(t){return a["a"].post(o["i"].deleteRole,{role_id:t})},menuList:function(){return a["a"].post(o["i"].menuList)}},u=i,s=n("9a1b");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={getOnlineUser:function(t){return a["a"].post("".concat(o["c"],"analyzer/online_user"),t)},getRegisterUser:function(t){return a["a"].post("".concat(o["c"],"analyzer/register_user"),t)},getActiveUser:function(t){return a["a"].post("".concat(o["c"],"analyzer/active_user"),t)},getActivePercent:function(t){return a["a"].post("".concat(o["c"],"analyzer/active_percent"),t)},getLoginUser:function(t){return a["a"].post("".concat(o["c"],"analyzer/login_user"),t)}};Object.assign(d,{getUserAnalyzeData:function(t){var e=l({},t,{province:"",city:""});return a["a"].all([d.getOnlineUser(t),d.getRegisterUser(e),d.getActiveUser(t),d.getLoginUser(t)])}});var f=d,p={getMUserList:function(t){return a["a"].post("".concat(o["c"],"iotuser/muserlist"),t)},addMUser:function(t){return a["a"].post("".concat(o["c"],"iotuser/savemuser"),t)},deleteMUser:function(t){return a["a"].post("".concat(o["c"],"iotuser/delmuser"),{user_ids:t})}},m={CmDataList:function(t){return a["a"].post(o["d"].CmDataList,t).then((function(t){return t.data}))},CmDataAdd:function(t){return a["a"].post(o["d"].CmDataAdd,t).then((function(t){return t.data}))},CmDataEdit:function(t){return a["a"].post(o["d"].CmDataEdit,t).then((function(t){return t.data}))},CmDataDel:function(t){return a["a"].post(o["d"].CmDataDel,t).then((function(t){return t.data}))},ModuleList:function(t){return a["a"].post(o["d"].ModuleList,t).then((function(t){return t.data}))},input:function(t){return a["a"].post(o["d"].input,t).then((function(t){return t.data}))}},g={imgList:function(t){return a["a"].post(o["g"].imgList,t).then((function(t){return t.data}))},addImgs:function(t){return a["a"].post(o["g"].addImgs,t).then((function(t){return t.data}))},deleteImgs:function(t){return a["a"].post(o["g"].deleteImgs,t).then((function(t){return t.data}))},editImgs:function(t){return a["a"].post(o["g"].editImgs,t).then((function(t){return t.data}))},sortImgs:function(t){return a["a"].post(o["g"].sortImgs,t).then((function(t){return t.data}))}},h={searchUserList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return a["a"].post(o["h"].userList,{phone_num:t,begin:e,size:n})},searchUserMsg:function(t){return a["a"].post(o["h"].searchUserMsg,t).then((function(t){return t.data.result}))},searchLogOut:function(t){return a["a"].post(o["h"].searchLogOut,t).then((function(t){return t.data.result}))},operaList:function(t){return a["a"].post(o["h"].operaList,t).then((function(t){return t.data.result}))},rootLogs:function(t){return a["a"].post(o["h"].rootLogs,t).then((function(t){return t.data.result}))},errLogs:function(t){return a["a"].post(o["h"].errLogs,t).then((function(t){return t.data.result}))},deviceLogs:function(t){return a["a"].post(o["h"].deviceLogs,t).then((function(t){return t.data.result}))},throughDatas:function(t){return a["a"].post(o["l"].throughDatas,t).then((function(t){return t.data.result}))},deviceTotals:function(t){return a["a"].post(o["l"].deviceTotal,t).then((function(t){return t.data.result}))},onlineLogs:function(t){return a["a"].post(o["l"].onlineLog,t).then((function(t){return t.data.result}))},logRegDatas:function(t){return a["a"].post(o["l"].logRegData,t).then((function(t){return t.data.result}))},qpsDatas:function(t){return a["a"].post(o["l"].qpsData,t).then((function(t){return t.data.result}))},getwarnDatas:function(t){return a["a"].post(o["l"].warnData,t).then((function(t){return t.data.result}))},getwarnDataList:function(t){return a["a"].post(o["l"].warnDataSearch,t).then((function(t){return t.data.result}))},routerList:function(t){return a["a"].post(o["h"].routerList,t).then((function(t){return t.data.result}))},cancelBindRouterList:function(t){return a["a"].post(o["h"].bindedlists,t).then((function(t){return t.data.result}))},cancelBind:function(t){return a["a"].post(o["h"].routerUnbind,t).then((function(t){return t.data.result}))},addRouter:function(t){return a["a"].post(o["h"].addRouter,t).then((function(t){return t.data.result}))},editRouter:function(t){return a["a"].post(o["h"].editRouter,t).then((function(t){return t.data}))},deleteRouter:function(t){return a["a"].post(o["h"].deleteRouter,t).then((function(t){return t.data}))},importRouter:function(t){return a["a"].post(o["h"].importRouter,t).then((function(t){return t.data.result}))},getFamilyList:function(t){return a["a"].post(o["h"].familyList,t).then((function(t){return t.data}))},directdeviceList:function(t){return a["a"].post(o["h"].directdeviceList,t).then((function(t){return t.data.result}))},addDirectdevice:function(t){return a["a"].post(o["h"].addDirectdevice,t).then((function(t){return t.data.result}))},editDirectdevice:function(t){return a["a"].post(o["h"].editDirectdevice,t).then((function(t){return t.data}))},deleteDirectdevice:function(t){return a["a"].post(o["h"].deleteDirectdevice,t).then((function(t){return t.data}))},importDirectdevice:function(t){return a["a"].post(o["h"].importDirectdevice,t).then((function(t){return t.data.result}))}},b={strategyList:function(t){return a["a"].post(o["k"].strategyList,t).then((function(t){return t.data}))},StrategyAdd:function(t){return a["a"].post(o["k"].StrategyAdd,t).then((function(t){return t.data}))},StrategyEdit:function(t){return a["a"].post(o["k"].StrategyEdit,t).then((function(t){return t.data}))},StrategyDel:function(t){return a["a"].post(o["k"].StrategyDel,t).then((function(t){return t.data}))},StrategyUuidList:function(t){return a["a"].post(o["k"].StrategyUuidList,t).then((function(t){return t.data}))},StrategyUuidAdd:function(t){return a["a"].post(o["k"].StrategyUuidAdd,t).then((function(t){return t.data}))},StrategyUuidEdit:function(t){return a["a"].post(o["k"].StrategyUuidEdit,t).then((function(t){return t.data}))},StrategyUuidDel:function(t){return a["a"].post(o["k"].StrategyUuidDel,t).then((function(t){return t.data}))},StrategyConfiglists:function(t){return a["a"].post(o["k"].StrategyConfiglists,t).then((function(t){return t.data}))},StrategyConfigAdd:function(t){return a["a"].post(o["k"].StrategyConfigAdd,t).then((function(t){return t.data}))},StrategyConfigEdit:function(t){return a["a"].post(o["k"].StrategyConfigEdit,t).then((function(t){return t.data}))},StrategyConfigDel:function(t){return a["a"].post(o["k"].StrategyConfigDel,t).then((function(t){return t.data}))}},y=n("5aa7");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}e["a"]=L({},u,{},s["a"],{},f,{},p,{},m,{},g,{},h,{},b,{},y["a"])},b64b:function(t,e,n){t.exports=n("1c0f")(313)},dbb4:function(t,e,n){t.exports=n("1c0f")(306)},e439:function(t,e,n){t.exports=n("1c0f")(305)},ef22:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-content config-page"},[n("div",{staticStyle:{position:"relative"}},[n("el-row",[n("el-col",[n("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v(" 新增用户 ")]),n("el-button",{attrs:{type:"danger"},on:{click:t.handleDelete}},[t._v(" 删除 ")]),n("el-form",{staticStyle:{float:"right"},attrs:{inline:!0}},[n("el-form-item",{staticStyle:{"margin-bottom":"0"}},[n("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),n("el-form-item",{staticStyle:{"margin-bottom":"0"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.handleSearch}},[t._v(" 查询 ")])],1)],1)],1)],1)],1),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-table",{attrs:{data:t.userList},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{selectable:t.onSelectable,type:"selection",width:"55"}}),t._l(t.tableColumn,(function(t){return n("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label,width:"auto"}})})),n("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["admin"!=e.row.name?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.handleEdit(e.row)}}},[t._v(" 编辑 ")]):t._e(),"admin"!=e.row.name?n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return t.handleDelete(e.row)}}},[t._v(" 删除 ")]):t._e()]}}])})],2),n("div",{staticClass:"page-line"},[n("el-pagination",{attrs:{total:t.total,"page-size":t.pageSize,"current-page":t.page,small:"",layout:"prev, pager, next"},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.onPageChange}})],1)],1),n("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-form",{attrs:{model:t.formdata,rules:t.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"用户名",prop:"name"}},[n("el-input",{attrs:{disabled:t.isEdit,autocomplete:"off"},model:{value:t.formdata.name,callback:function(e){t.$set(t.formdata,"name",e)},expression:"formdata.name"}})],1),t.isEdit?t._e():n("el-form-item",{attrs:{label:"密码",prop:"password"}},[n("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:t.formdata.password,callback:function(e){t.$set(t.formdata,"password",e)},expression:"formdata.password"}})],1),n("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[n("el-input",{attrs:{disabled:t.isEdit},model:{value:t.formdata.mobile,callback:function(e){t.$set(t.formdata,"mobile",e)},expression:"formdata.mobile"}})],1),n("el-form-item",{attrs:{model:t.formdata,label:"邮箱",prop:"email"}},[n("el-input",{model:{value:t.formdata.email,callback:function(e){t.$set(t.formdata,"email",e)},expression:"formdata.email"}})],1),n("el-form-item",{attrs:{label:"部门"}},[n("el-input",{model:{value:t.formdata.department,callback:function(e){t.$set(t.formdata,"department",e)},expression:"formdata.department"}})],1),n("el-form-item",{attrs:{label:"职位"}},[n("el-input",{model:{value:t.formdata.job,callback:function(e){t.$set(t.formdata,"job",e)},expression:"formdata.job"}})],1),n("el-form-item",{attrs:{label:"用户权限",prop:"role_id"}},[n("el-select",{model:{value:t.formdata.role_id,callback:function(e){t.$set(t.formdata,"role_id",e)},expression:"formdata.role_id"}},t._l(t.roleList,(function(t){return n("el-option",{key:t.role_id,attrs:{label:t.role_name,value:t.role_id}})})),1)],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.formSubmit}},[t._v("确 定")])],1)],1)],1)},a=[],o=(n("d81d"),n("b0c0"),n("8e44")),i={data:function(){return{tableColumn:[{prop:"id",label:"id"},{prop:"name",label:"用户名"},{prop:"role_name",label:"角色"},{prop:"mobile",label:"手机号"},{prop:"created_at",label:"创建时间"}],totalItem:0,currentPage:1,isEdit:!1,dialogVisible:!1,selectedIds:[],userList:[],roleList:[],menuList:[],formdata:{},total:0,pageSize:20,page:1,keyword:"",rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"}],role_id:[{required:!0,message:"请选择角色",trigger:"blur"}]}}},computed:{dialogTitle:function(){return this.isEdit?"编辑":"添加"}},mounted:function(){this.getUserList(),this.getRoleList(),this.getMenuList()},methods:{handleAdd:function(){this.isEdit=!1,this.dialogVisible=!0,this.formdata={}},handleEdit:function(t){this.isEdit=!0,this.dialogVisible=!0,this.formdata=Object.assign({},t),this.formdata.user_id=t.id},handleDelete:function(t){var e=this;if(t.id||0!==this.selectedIds.length){var n=t.id?[t.id]:this.selectedIds.map((function(t){return t.id}));this.$confirm("确认删除？","提示").then((function(){o["a"].deleteUser(JSON.stringify(n)).then((function(t){e.$message("删除成功"),e.getUserList()}))}))}else this.$message("请最少选择一项")},handleExport:function(){},handleSelectionChange:function(t){this.selectedIds=t},onSelectable:function(t,e){return"admin"!==t.name},onPageChange:function(t){this.getUserList()},formSubmit:function(){var t=this;o["a"][this.isEdit?"editUser":"addUser"](this.formdata).then((function(e){t.$message(t.isEdit?"修改成功":"添加成功"),t.dialogVisible=!1,t.getUserList()}))},handleSearch:function(){this.page=1,this.getUserList()},getUserList:function(){var t=this;o["a"].userList({keyword:this.keyword,page:this.page,limit:this.pageSize}).then((function(e){t.userList=e.data.result.data,t.total=e.data.result.total}))},getRoleList:function(){var t=this;o["a"].roleList().then((function(e){t.roleList=e.data.result}))},getMenuList:function(){var t=this;o["a"].menuList().then((function(e){t.menuList=e.data.result}))},getUserDetail:function(t){var e=this;o["a"].getUser(t).then((function(t){e.formdata=t.data.result}))}}},u=i,s=n("2877"),c=Object(s["a"])(u,r,a,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-e007004c.5f3aa391.js.map