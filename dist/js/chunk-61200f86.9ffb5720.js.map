{"version":3,"sources":["webpack:///./src/pages/analyzer/deviceData.vue?1d76","webpack:///src/pages/analyzer/deviceData.vue","webpack:///./src/pages/analyzer/deviceData.vue?97f9","webpack:///./src/pages/analyzer/deviceData.vue","webpack:///./src/pages/analyzer/deviceData.vue?982f"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","pickerOptions","model","value","formdata","callback","$$v","$set","expression","on","onCitySelect","staticStyle","search","_v","class","chartSettings1","type","$event","changeCharType","showFamilyCategoryEmpty","operFamilyCategoryCharData","chartExtend1","chartSettings2","showFamilyCategoryRateEmpty","operFamilyCategoryRateCharData","chartExtend2","chartSettings3","showStatEmpty","operStatCharData","chartExtend3","staticRenderFns","num","length","d","getFullYear","padZero","getMonth","getDate","components","CityPicker","data","area","date","platform","province","city","shortcuts","columns","rows","labelMap","family_num","yAxisType","family_rate","oper_num","series","barWidth","itemStyle","normal","label","show","position","formatter","a","componentSubType","mounted","end","setTime","getTime","start","getDeviceAnalyzeData","start_date","formatDate","end_date","methods","val","os_type","app_version","getOperFamilyCategoryData","getOperStatData","key","component"],"mappings":"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","file":"js/chunk-61200f86.9ffb5720.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-content config-page\"},[_c('el-row',[_c('el-col',[_c('el-form',{attrs:{\"inline\":true}},[_c('el-form-item',[_c('el-date-picker',{attrs:{\"clearable\":false,\"picker-options\":_vm.pickerOptions,\"placeholder\":\"请选择时间段\",\"type\":\"daterange\",\"align\":\"left\",\"unlink-panels\":\"\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.formdata.date),callback:function ($$v) {_vm.$set(_vm.formdata, \"date\", $$v)},expression:\"formdata.date\"}})],1),_c('el-form-item',[_c('el-select',{attrs:{\"placeholder\":\"请选择平台\"},model:{value:(_vm.formdata.platform),callback:function ($$v) {_vm.$set(_vm.formdata, \"platform\", $$v)},expression:\"formdata.platform\"}},[_c('el-option',{attrs:{\"label\":\"Android_Pad\",\"value\":\"Android_Pad\"}}),_c('el-option',{attrs:{\"label\":\"IOS\",\"value\":\"IOS\"}}),_c('el-option',{attrs:{\"label\":\"Android\",\"value\":\"Android\"}}),_c('el-option',{attrs:{\"label\":\"IOS_Pad\",\"value\":\"IOS_Pad\"}}),_c('el-option',{attrs:{\"label\":\"合计\",\"value\":\"\"}})],1)],1),_c('el-form-item',[_c('city-picker',{on:{\"change\":_vm.onCitySelect}})],1),_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\" 查询 \")])],1)],1)],1)],1),_c('div',{staticStyle:{\"margin\":\"20px\"}},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-row',{attrs:{\"gutter\":24}},[_c('el-col',{attrs:{\"span\":16}},[_c('div',[_c('span',[_vm._v(\"控制设备家庭户数\")]),_c('span',{staticClass:\"type-icon\",class:[(_vm.chartSettings1.type === 'histogram') ? 'histogram-active' : 'histogram'],on:{\"click\":function($event){return _vm.changeCharType('chartSettings1', 'histogram')}}}),_c('span',{staticClass:\"type-icon\",class:[(_vm.chartSettings1.type === 'line') ? 'line-active' : 'line'],on:{\"click\":function($event){return _vm.changeCharType('chartSettings1', 'line')}}})]),_c('div',[_vm._v(\"单位: 户\")])])],1),_c('ve-chart',{attrs:{\"data-empty\":_vm.showFamilyCategoryEmpty,\"legend-visible\":false,\"data\":_vm.operFamilyCategoryCharData,\"extend\":_vm.chartExtend1,\"settings\":_vm.chartSettings1}})],1)],1),_c('div',{staticStyle:{\"margin\":\"20px\"}},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-row',{attrs:{\"gutter\":24}},[_c('el-col',{attrs:{\"span\":16}},[_c('div',[_c('span',[_vm._v(\"控制设备家庭比重\")]),_c('span',{staticClass:\"type-icon\",class:[(_vm.chartSettings2.type === 'histogram') ? 'histogram-active' : 'histogram'],on:{\"click\":function($event){return _vm.changeCharType('chartSettings2', 'histogram')}}}),_c('span',{staticClass:\"type-icon\",class:[(_vm.chartSettings2.type === 'line') ? 'line-active' : 'line'],on:{\"click\":function($event){return _vm.changeCharType('chartSettings2', 'line')}}})]),_c('div',[_vm._v(\"单位: %\")])])],1),_c('ve-chart',{attrs:{\"data-empty\":_vm.showFamilyCategoryRateEmpty,\"legend-visible\":false,\"data\":_vm.operFamilyCategoryRateCharData,\"extend\":_vm.chartExtend2,\"settings\":_vm.chartSettings2}})],1)],1),_c('div',{staticStyle:{\"margin\":\"20px\"}},[_c('el-card',{attrs:{\"shadow\":\"never\"}},[_c('el-row',{attrs:{\"gutter\":24}},[_c('el-col',{attrs:{\"span\":16}},[_c('div',[_c('span',[_vm._v(\"控制设备次数\")]),_c('span',{staticClass:\"type-icon\",class:[(_vm.chartSettings3.type === 'histogram') ? 'histogram-active' : 'histogram'],on:{\"click\":function($event){return _vm.changeCharType('chartSettings3', 'histogram')}}}),_c('span',{staticClass:\"type-icon\",class:[(_vm.chartSettings3.type === 'line') ? 'line-active' : 'line'],on:{\"click\":function($event){return _vm.changeCharType('chartSettings3', 'line')}}})]),_c('div',[_vm._v(\"单位: 次\")])])],1),_c('ve-chart',{attrs:{\"data-empty\":_vm.showStatEmpty,\"legend-visible\":false,\"data\":_vm.operStatCharData,\"extend\":_vm.chartExtend3,\"settings\":_vm.chartSettings3}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"page-content config-page\">\r\n    <el-row>\r\n      <el-col>\r\n        <el-form :inline=\"true\">\r\n          <el-form-item>\r\n            <el-date-picker\r\n              v-model=\"formdata.date\"\r\n              :clearable=\"false\"\r\n              :picker-options=\"pickerOptions\"\r\n              placeholder=\"请选择时间段\"\r\n              type=\"daterange\"\r\n              align=\"left\"\r\n              unlink-panels\r\n              range-separator=\"至\"\r\n              start-placeholder=\"开始日期\"\r\n              end-placeholder=\"结束日期\"\r\n            />\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-select\r\n              v-model=\"formdata.platform\"\r\n              placeholder=\"请选择平台\"\r\n            >\r\n              <el-option\r\n                label=\"Android_Pad\"\r\n                value=\"Android_Pad\"\r\n              />\r\n              <el-option\r\n                label=\"IOS\"\r\n                value=\"IOS\"\r\n              />\r\n              <el-option\r\n                label=\"Android\"\r\n                value=\"Android\"\r\n              />\r\n              <el-option\r\n                label=\"IOS_Pad\"\r\n                value=\"IOS_Pad\"\r\n              />\r\n              <el-option\r\n                label=\"合计\"\r\n                value=\"\"\r\n              />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <city-picker @change=\"onCitySelect\" />\r\n          </el-form-item>\r\n          <el-form-item style=\"margin-bottom:0\">\r\n            <el-button\r\n              type=\"primary\"\r\n              @click=\"search\"\r\n            >\r\n              查询\r\n            </el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <div style=\"margin: 20px\">\r\n      <el-card shadow=\"never\">\r\n        <el-row :gutter=\"24\">\r\n          <el-col :span=\"16\">\r\n            <div>\r\n              <span>控制设备家庭户数</span>\r\n              <span\r\n                :class=\"[(chartSettings1.type === 'histogram') ? 'histogram-active' : 'histogram']\"\r\n                class=\"type-icon\"\r\n                @click=\"changeCharType('chartSettings1', 'histogram')\"\r\n              />\r\n              <span\r\n                :class=\"[(chartSettings1.type === 'line') ? 'line-active' : 'line']\"\r\n                class=\"type-icon\"\r\n                @click=\"changeCharType('chartSettings1', 'line')\"\r\n              />\r\n            </div>\r\n            <div>单位: 户</div>\r\n          </el-col>\r\n        </el-row>\r\n        <ve-chart\r\n          :data-empty=\"showFamilyCategoryEmpty\"\r\n          :legend-visible=\"false\"\r\n          :data=\"operFamilyCategoryCharData\"\r\n          :extend=\"chartExtend1\"\r\n          :settings=\"chartSettings1\"\r\n        />\r\n        <!-- <ve-histogram :data=\"operFamilyCategoryCharData\" :extend=\"chartExtend\" :settings=\"chartSettings\"></ve-histogram> -->\r\n      </el-card>\r\n    </div>\r\n    <div style=\"margin: 20px\">\r\n      <el-card shadow=\"never\">\r\n        <el-row :gutter=\"24\">\r\n          <el-col :span=\"16\">\r\n            <div>\r\n              <span>控制设备家庭比重</span>\r\n              <span\r\n                :class=\"[(chartSettings2.type === 'histogram') ? 'histogram-active' : 'histogram']\"\r\n                class=\"type-icon\"\r\n                @click=\"changeCharType('chartSettings2', 'histogram')\"\r\n              />\r\n              <span\r\n                :class=\"[(chartSettings2.type === 'line') ? 'line-active' : 'line']\"\r\n                class=\"type-icon\"\r\n                @click=\"changeCharType('chartSettings2', 'line')\"\r\n              />\r\n            </div>\r\n            <div>单位: %</div>\r\n          </el-col>\r\n        </el-row>\r\n        <ve-chart\r\n          :data-empty=\"showFamilyCategoryRateEmpty\"\r\n          :legend-visible=\"false\"\r\n          :data=\"operFamilyCategoryRateCharData\"\r\n          :extend=\"chartExtend2\"\r\n          :settings=\"chartSettings2\"\r\n        />\r\n        <!-- <ve-histogram :data=\"operFamilyCategoryCharData\" :extend=\"chartExtend\" :settings=\"chartSettings\"></ve-histogram> -->\r\n      </el-card>\r\n    </div>\r\n    <div style=\"margin: 20px\">\r\n      <el-card shadow=\"never\">\r\n        <el-row :gutter=\"24\">\r\n          <el-col :span=\"16\">\r\n            <div>\r\n              <span>控制设备次数</span>\r\n              <span\r\n                :class=\"[(chartSettings3.type === 'histogram') ? 'histogram-active' : 'histogram']\"\r\n                class=\"type-icon\"\r\n                @click=\"changeCharType('chartSettings3', 'histogram')\"\r\n              />\r\n              <span\r\n                :class=\"[(chartSettings3.type === 'line') ? 'line-active' : 'line']\"\r\n                class=\"type-icon\"\r\n                @click=\"changeCharType('chartSettings3', 'line')\"\r\n              />\r\n            </div>\r\n            <div>单位: 次</div>\r\n          </el-col>\r\n        </el-row>\r\n        <ve-chart\r\n          :data-empty=\"showStatEmpty\"\r\n          :legend-visible=\"false\"\r\n          :data=\"operStatCharData\"\r\n          :extend=\"chartExtend3\"\r\n          :settings=\"chartSettings3\"\r\n        />\r\n        <!-- <ve-histogram :data=\"operStatCharData\" :extend=\"chartExtend\" :settings=\"chartSettings\"></ve-histogram> -->\r\n      </el-card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CityPicker from '../../components/cityPicker.vue'\r\nimport axios from 'axios'\r\nimport * as URL from '~/lib/api'\r\n\r\nconst padZero = num => {\r\n  num = num + ''\r\n  return num.length === 1 ? '0' + num : num\r\n}\r\n\r\nconst formatDate = d => {\r\n  return d.getFullYear() + '-' + padZero(d.getMonth() + 1) + '-' + padZero(d.getDate())\r\n}\r\n\r\nexport default {\r\n  components: {\r\n    CityPicker\r\n  },\r\n  data () {\r\n    return {\r\n      area: '',\r\n      formdata: {\r\n        date: '',\r\n        platform: '',\r\n        province: '',\r\n        city: ''\r\n      },\r\n      pickerOptions: {\r\n        shortcuts: [\r\n          {\r\n            text: '最近一周',\r\n            onClick (picker) {\r\n              const end = new Date()\r\n              const start = new Date()\r\n              end.setTime(end.getTime() - 3600 * 1000 * 24 * 1)\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7)\r\n              picker.$emit('pick', [start, end])\r\n            }\r\n          },\r\n          {\r\n            text: '最近一个月',\r\n            onClick (picker) {\r\n              const end = new Date()\r\n              const start = new Date()\r\n              end.setTime(end.getTime() - 3600 * 1000 * 24 * 1)\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 31)\r\n              picker.$emit('pick', [start, end])\r\n            }\r\n          },\r\n          {\r\n            text: '最近三个月',\r\n            onClick (picker) {\r\n              const end = new Date()\r\n              const start = new Date()\r\n              end.setTime(end.getTime() - 3600 * 1000 * 24 * 1)\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 93)\r\n              picker.$emit('pick', [start, end])\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      operFamilyCategoryCharData: {\r\n        columns: ['category_title', 'family_num'],\r\n        rows: []\r\n      },\r\n      operFamilyCategoryRateCharData: {\r\n        columns: ['category_title', 'family_rate'],\r\n        rows: []\r\n      },\r\n      operStatCharData: {\r\n        columns: ['category_title', 'oper_num'],\r\n        rows: []\r\n      },\r\n      chartSettings1: {\r\n        type: 'histogram',\r\n        labelMap: {\r\n          family_num: '户数'\r\n        }\r\n      },\r\n      chartSettings2: {\r\n        yAxisType: ['percent'],\r\n        type: 'histogram',\r\n        labelMap: {\r\n          family_rate: '比重'\r\n        }\r\n      },\r\n      chartSettings3: {\r\n        type: 'histogram',\r\n        labelMap: {\r\n          oper_num: '次数'\r\n        }\r\n      },\r\n      chartExtend1: {\r\n        // label设置查看echarts 2.x文档\r\n        series: {\r\n          barWidth: 40,\r\n          itemStyle: {\r\n            normal: {\r\n              label: { show: true, position: 'top' }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      chartExtend2: {\r\n        series: {\r\n          barWidth: 40,\r\n          itemStyle: {\r\n            normal: {\r\n              label: {\r\n                show: true,\r\n                position: 'top',\r\n                formatter (a) {\r\n                  // echarts配置文档中\r\n                  // line value是数组\r\n                  // histogram value是number\r\n                  let value = ''\r\n                  if (a.componentSubType === 'line') {\r\n                    value = a.value[1]\r\n                  } else {\r\n                    value = a.value\r\n                  }\r\n                  return value * 100 + '%'\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      chartExtend3: {\r\n        series: {\r\n          barWidth: 40,\r\n          itemStyle: {\r\n            normal: {\r\n              label: { show: true, position: 'top' }\r\n            }\r\n          }\r\n        }\r\n      },\r\n      showFamilyCategoryEmpty: false,\r\n      showFamilyCategoryRateEmpty: false,\r\n      showStatEmpty: false\r\n    }\r\n  },\r\n  mounted () {\r\n    const end = new Date()\r\n    const start = new Date()\r\n    end.setTime(end.getTime() - 3600 * 1000 * 24 * 1)\r\n    start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\r\n    this.formdata.date = [start, end]\r\n    this.getDeviceAnalyzeData({\r\n      start_date: formatDate(start),\r\n      end_date: formatDate(end),\r\n      city: ''\r\n    })\r\n  },\r\n  methods: {\r\n    onCitySelect (val) {\r\n      this.formdata.province = val[0]\r\n      this.formdata.city = val[1]\r\n    },\r\n    search () {\r\n      const { date, platform, province, city } = this.formdata\r\n      this.getDeviceAnalyzeData({\r\n        start_date: formatDate(date[0]),\r\n        end_date: formatDate(date[1]),\r\n        province,\r\n        city,\r\n        os_type: platform || '',\r\n        app_version: ''\r\n      })\r\n    },\r\n    getDeviceAnalyzeData (params) {\r\n      // console.log(params);\r\n      axios.all([this.getOperFamilyCategoryData(params), this.getOperStatData(params)]).then(\r\n        axios.spread((operFamilyCategoryData, operStatData) => {\r\n          this.operFamilyCategoryCharData.rows = operFamilyCategoryData.data.result.list || []\r\n          this.showFamilyCategoryEmpty = !this.operFamilyCategoryCharData.rows.length\r\n          this.operFamilyCategoryRateCharData.rows = operFamilyCategoryData.data.result.list || []\r\n          this.showFamilyCategoryRateEmpty = !this.operFamilyCategoryRateCharData.rows.length\r\n          this.operStatCharData.rows = operStatData.data.result.list || []\r\n          this.showStatEmpty = !this.operStatCharData.rows.length\r\n        })\r\n      )\r\n    },\r\n    getOperFamilyCategoryData (params) {\r\n      return axios.post(URL.operFamilyCategory, params)\r\n    },\r\n    getOperStatData (params) {\r\n      return axios.post(URL.operStat, params)\r\n    },\r\n    // 点击图标转换图标类型\r\n    changeCharType (key, type) {\r\n      this[key].type = type\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.analyzer-data {\r\n  .select {\r\n    cursor: pointer;\r\n  }\r\n  .data-list > div {\r\n    margin: 15px 0;\r\n    font-size: 14px;\r\n    &:nth-child(2) {\r\n      color: #409eff;\r\n      font-size: 18px;\r\n    }\r\n  }\r\n}\r\n.icon-information {\r\n  display: inline-block;\r\n  width: 12px;\r\n  height: 12px;\r\n  background-image: url(../../images/icn_explain.png);\r\n  background-size: 100% 100%;\r\n}\r\n.icon-tendency {\r\n  display: inline-block;\r\n  width: 12px;\r\n  height: 12px;\r\n  background-image: url(../../images/tendency.png);\r\n  background-size: 100% 100%;\r\n}\r\n.type-icon {\r\n  display: inline-block;\r\n  width: 15px;\r\n  height: 15px;\r\n  background-size: 100% 100%;\r\n  cursor: pointer;\r\n}\r\n.histogram {\r\n  background-image: url(../../images/icn_histogram.png);\r\n  margin: 0 10px;\r\n}\r\n.histogram-active {\r\n  background-image: url(../../images/icn_histogram_active.png);\r\n  margin: 0 10px;\r\n}\r\n.line {\r\n  background-image: url(../../images/icn_line.png);\r\n}\r\n.line-active {\r\n  background-image: url(../../images/icn_line_active.png);\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deviceData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deviceData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./deviceData.vue?vue&type=template&id=1c7d791e&scoped=true&\"\nimport script from \"./deviceData.vue?vue&type=script&lang=js&\"\nexport * from \"./deviceData.vue?vue&type=script&lang=js&\"\nimport style0 from \"./deviceData.vue?vue&type=style&index=0&id=1c7d791e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c7d791e\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deviceData.vue?vue&type=style&index=0&id=1c7d791e&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./deviceData.vue?vue&type=style&index=0&id=1c7d791e&lang=less&scoped=true&\""],"sourceRoot":""}