(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dd8ae2a"],{"5aa7":function(t,e,r){"use strict";r("a4d3"),r("4de4"),r("e439"),r("dbb4"),r("b64b"),r("159b");var n=r("ade3"),o=r("1e04"),a=r("46f1");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var l="/api.php";e["a"]={agreementSave:function(t){return o["a"].post(a["m"].agreementSave,t).then((function(t){return t.data}))},agreementdel:function(t){return o["a"].post(a["m"].agreementdel,t).then((function(t){return t.data}))},pubilcCorsAction:function(t){return o["a"].post(l,t).then((function(t){return t.data}))},getVersions:function(t){return t.method="list_versions",o["a"].post(l,t).then((function(t){return t.data}))},getVersionsForSC:function(t){return t.method="list_versions_community",o["a"].post(l,t).then((function(t){return t.data}))},selectVersion:function(t){return o["a"].post(a["m"].selectVersion,t).then((function(t){return t.data}))},pushUpdateAction:function(t){return o["a"].post(a["m"].pushUpdateAction,t).then((function(t){return t.data}))},getPushHistoryList:function(t){return o["a"].post(a["m"].getPushHistoryList,t).then((function(t){return t.data}))},getChoseList:function(t){return o["a"].post(l,t).then((function(t){return t.data}))},getAgreementList:function(t){return o["a"].post(a["m"].agreementList,t).then((function(t){return t.data}))},getAppList:function(t){return o["a"].post(l,s({method:"list_applications"},t))},getAppInfo:function(t){return o["a"].post(l,s({method:"info_applications"},t))},delApp:function(t){return o["a"].post(l,s({method:"del_applications"},t))},saveApp:function(t){return o["a"].post(l,s({method:"save_applications"},t))},getAppVerList:function(t){return o["a"].post(l,s({method:"list_versions_commom"},t))},getAppVerInfo:function(t){return o["a"].post(l,s({method:"info_versions_commom"},t))},delAppVer:function(t){return o["a"].post(l,s({method:"del_version_commom"},t))},saveAppVer:function(t){return o["a"].post(l,s({method:"save_app_version_commom"},t))},setAppVerStatus:function(t){return o["a"].post(l,s({method:"set_status_commom"},t))},setAppVerUuids:function(t){return o["a"].post(l,s({method:"set_uuids_commom"},t))},getAppVerUuids:function(t){return o["a"].post(l,s({method:"get_uuids_commom"},t))}}},"5c07":function(t,e,r){},"69f3":function(t,e,r){},8318:function(t,e,r){"use strict";var n=r("69f3"),o=r.n(n);o.a},a9e3:function(t,e,r){t.exports=r("1c0f")(392)},b64b:function(t,e,r){t.exports=r("1c0f")(313)},dbb4:function(t,e,r){t.exports=r("1c0f")(306)},e439:function(t,e,r){t.exports=r("1c0f")(305)},e66e:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"form-header"},[r("el-button",{attrs:{type:"primary"},on:{click:t.addProtocal}},[t._v("新增协议 ")])],1),r("List",{attrs:{"table-items":t.tableItems,"table-data":t.tableData},scopedSlots:t._u([{key:"handle",fn:function(e){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.refresh(e.row)}}},[t._v("更新 ")]),r("el-button",{attrs:{type:"text"},on:{click:function(r){return t.deleteProtocal(e.row)}}},[t._v("删除 ")])]}}])}),t.dialogFormVisible?r("add-new-protocal",{attrs:{type:t.type,info:t.info,"dialog-form-visible":t.dialogFormVisible},on:{"update:dialogFormVisible":function(e){t.dialogFormVisible=e},"update:dialog-form-visible":function(e){t.dialogFormVisible=e},refreshData:t.getList}}):t._e()],1)},o=[],a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"table-list-view"},[r("el-table",{style:{width:t.tableWidth},attrs:{size:t.size,data:t.localTableData,border:t.isBorder}},[t._l(t.tableItems,(function(e,n){return[e.shouldCustom?t._e():r("el-table-column",{key:e.prop+n,attrs:{type:e.type,prop:e.prop,label:e.label,width:e.width,"show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(r){return[t._v(" "+t._s(t._f("format")(r.row[e.prop],e.label,e.options))+" ")]}}],null,!0)}),e.shouldCustom?r("el-table-column",{key:e.prop+n,attrs:{label:e.label,width:e.width},scopedSlots:t._u([{key:"default",fn:function(r){return[t._t(e.prop,null,{row:r.row})]}}],null,!0)}):t._e()]}))],2),t.showPagination?r("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,50],"page-size":t.pageSize,total:t.localTotal,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}):t._e()],1)},i=[],s=(r("a4d3"),r("4de4"),r("a9e3"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3"));function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){Object(s["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var c={name:"List",props:{isBorder:{type:Boolean,default:!0},size:{type:String,default:""},showPagination:{type:Boolean,default:!1},tableWidth:{type:String,default:"100%"},tableData:{type:Array,default:function(){return[]}},total:{type:Number,default:0},tableItems:{type:Array,default:function(){return[]}},formData:{type:Object,default:function(){return{}}},requestFunc:{type:Function,default:null},paginationLeft:{type:String,default:"300px"}},data:function(){return{localForm:this.formData,currentPage:1,pageSize:10,localTotal:this.total,localTableData:this.tableData}},watch:{tableData:function(t){this.localTableData=t},total:function(t){this.localTotal=t}},mounted:function(){this.tableData.length>0&&this.requestFunc&&this.requestData(1)},methods:{requestData:function(t){var e=this,r=t||this.currentPage;this.currentPage=r;var n=u({},this.localForm,{currentPage:this.currentPage,pageSize:this.pageSize});this.requestFunc(n).then((function(t){e.localTotal=t.data.total||0,e.localTableData=e.pickRows(t.data)}))},pickRows:function(t){if(t.rows&&t.rows instanceof Array)return t.rows;var e=[];for(var r in t)if(t[r]instanceof Array){e=t[r];break}return e},handleSizeChange:function(t){this.currentPage=1,this.pageSize=t,this.requestData()},handleCurrentChange:function(t){this.currentPage=t,this.requestData()}}},p=c,f=(r("8318"),r("2877")),d=Object(f["a"])(p,a,i,!1,null,"3c28456f",null),m=d.exports,h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-dialog",{attrs:{visible:t.dialogFormVisible,"before-close":t.close,title:"add"===t.type?"新增协议":"更新协议",center:""},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{attrs:{rules:t.rules,model:t.form,"label-width":t.formLabelWidth}},[r("el-form-item",{attrs:{prop:"name",label:"协议名称:"}},[r("el-input",{attrs:{maxlength:50},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("el-form-item",{attrs:{prop:"url",label:"协议连接:"}},[r("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),r("el-form-item",{attrs:{label:"备注:"}},[r("el-input",{attrs:{maxlength:50},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),r("el-form-item",{attrs:{label:"版本号:"}},[t._v(" "+t._s(t.form.version)+" ")])],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.close}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定 ")])],1)],1)},b=[],g=r("5aa7"),y={name:"AddNewProtocal",props:{type:{type:String,default:"add"},info:{type:Object,default:function(){return{}}},dialogFormVisible:{type:Boolean,default:!1}},data:function(){function t(t,e,r){var n=/(ht|f)tp(s?)\:\/\/[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])*(:(0-9)*)*(\/?)([a-zA-Z0-9\-\.\?\,\'\/\\\+&amp;%$#_]*)?/;n.test(e)?r():r("请输入正确的url地址")}return{formLabelWidth:"120px",form:Object.assign({name:"",url:"",remark:"",version:""},this.info),rules:{name:[{required:!0,message:"请输入协议名称",trigger:"blur"}],url:[{required:!0,message:"请输入协议链接",trigger:"blur"},{validator:t,trigger:"blur"}]}}},watch:{info:function(t){this.form=Object.assign({},t)}},methods:{close:function(){this.$emit("update:dialogFormVisible",!1)},confirm:function(){var t=this;g["a"].agreementSave(this.form).then((function(e){t.$emit("refreshData"),t.$message.success("".concat("add"===t.type?"新增":"更新","协议成功")),t.close()}))}}},v=y,w=Object(f["a"])(v,h,b,!1,null,"a8dbadc2",null),_=w.exports,O={name:"ProtocolManage",components:{List:m,addNewProtocal:_},data:function(){return{info:{},type:"add",recordVisible:!1,dialogFormVisible:!1,tableData:[],tableItems:[{label:"协议Id",prop:"id",width:"70"},{label:"协议名称",prop:"name",width:""},{label:"协议连接",prop:"url",width:"350"},{label:"备注",prop:"remark",width:""},{label:"版本号",prop:"version",width:"90"},{label:"更新时间",prop:"updated_at",width:"160"},{label:"操作",prop:"handle",width:"",shouldCustom:!0}]}},mounted:function(){this.getList()},methods:{getList:function(){var t=this;g["a"].getAgreementList().then((function(e){t.tableData=e.result.data}))},addProtocal:function(){this.type="add",this.info={},this.dialogFormVisible=!0},refresh:function(t){this.dialogFormVisible=!0,this.info=t,this.type="refresh"},deleteProtocal:function(t){var e=this;this.$confirm("确认删除此协议, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){g["a"].agreementdel({id:t.id}).then((function(t){e.$message.success("删除成功"),e.getList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},P=O,j=(r("f43b"),Object(f["a"])(P,n,o,!1,null,"0bef049a",null));e["default"]=j.exports},f43b:function(t,e,r){"use strict";var n=r("5c07"),o=r.n(n);o.a}}]);
//# sourceMappingURL=chunk-1dd8ae2a.6d16fc32.js.map