(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-003253fa"],{"2b3d":function(t,e,a){t.exports=a("1c0f")(225)},"2c23":function(t,e,a){},"7dce":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-content"},[a("div",{staticClass:"title"},[t._v(" 入口配置 ")]),a("el-form",{ref:"form",staticClass:"form-config",attrs:{model:t.config,rules:t.rules,"label-position":"left","label-width":"200px"}},[a("el-form-item",{attrs:{label:"开启家居商城",prop:"status"}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:t.config.status,callback:function(e){t.$set(t.config,"status",e)},expression:"config.status"}}),a("div",{staticClass:"tips"},[t._v(" 开启商城将在星络App的家居页面开放按钮，可以点击进入H5商城 ")])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1===+t.config.status,expression:"+config.status === 1"}]},[a("el-form-item",{attrs:{label:"按钮文案",prop:"content"}},[a("el-input",{model:{value:t.config.content,callback:function(e){t.$set(t.config,"content",e)},expression:"config.content"}})],1),a("el-form-item",{attrs:{label:"链接地址",prop:"url"}},[a("el-input",{model:{value:t.config.url,callback:function(e){t.$set(t.config,"url",e)},expression:"config.url"}})],1),a("el-form-item",{attrs:{label:"按钮图标"}},[a("Upload",{attrs:{"image-file":t.imageFile,valid:t.valid},on:{emitImageData:t.emitImageData}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v(" 确定并生效 ")])],1)],1)],1)},r=[],s=a("f1ed"),n=a("9dac"),o={components:{Upload:n["a"]},data:function(){return{valid:{type:1,tips:"只能上传jpg/png格式文件，单个文件不能超过500kb"},imageFile:"",config:{content:"",image_url:"",status:1,url:"www.baidu.com"},rules:{status:[{required:!0,message:"",trigger:"blur"}],content:[{required:!0,message:"请输入按钮文案",trigger:"blur"},{min:2,max:6,message:"按钮文案文字限制为2-6个中文",trigger:"blur"}],url:[{required:!0,message:"请输入链接地址",trigger:"blur"},{min:1,max:200,message:"链接地址限制长度为200字",trigger:"blur"}]}}},mounted:function(){this.getConfigInfo()},methods:{submitForm:function(){var t=this;this.$refs["form"].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.saveConfig()}))},getConfigInfo:function(){var t=this;return this.$http.post(s["a"]+"mall_record/info_config",{}).then((function(e){var a=e.data;200===a.code?(t.config.content=e.data.result.content,t.config.status=e.data.result.status+"",t.config.url=e.data.result.url,t.config.image_url=e.data.result.image_url_object,t.imageFile=e.data.result.image_url):t.$message.error(a.msg)})).catch((function(e){e&&e.msg?t.$message.error(e.msg):t.$message.error(e)}))},saveConfig:function(){var t=this;console.log(this.config),this.$http.post(s["a"]+"mall_record/save_config",this.config).then((function(e){var a=e.data;if(200===a.code)return t.getConfigInfo()})).then((function(){t.$message.success("保存成功")})).catch((function(e){e&&e.msg?t.$message.error(e.msg):t.$message.error(e)}))},emitImageData:function(t){this.config.image_url=t.object,this.imageFile=t.download_url}}},l=o,c=(a("ffa8"),a("2877")),u=Object(c["a"])(l,i,r,!1,null,null,null);e["default"]=u.exports},"9dac":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.corsUrls,"show-file-list":!1,"on-success":t.handleAvatarSuccess,data:t.uploadObj,"before-upload":t.beforeAvatarUpload}},[t.imageFile?a("img",{staticClass:"avatar",attrs:{src:t.imageFile}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("i",{staticClass:"clear el-icon-remove",on:{click:function(e){return e.stopPropagation(),t.clearImg(e)}}})]),a("div",{staticClass:"tips"},[t._v(" "+t._s(t.valid.tips)+" ")])],1)},r=[],s=(a("99af"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("227d")),n={props:["imageFile","type","valid","path"],data:function(){var t={token:JSON.parse(localStorage.getItem("localData")).user.info.token};return this.path&&(t.path=this.path),{corsUrls:Object(s["a"])()+"/oss_file_upload",uploadObj:t}},methods:{handleAvatarSuccess:function(t){this.$emit("emitImageData",t.result)},beforeAvatarUpload:function(t){var e=this,a="image/jpeg"===t.type||"image/png"===t.type;if("1"===this.valid.type){var i=t.size/1024<500;return a||this.$message.error("只能上传jpg或者png格式!"),i||this.$message.error("大小不能超过 500kb!"),a&&i}if("2"===this.valid.type){var r=new Promise((function(a,i){var r=e.valid.width,s=e.valid.height,n=window.URL||window.webkitURL,o=new Image;o.onload=function(){var t=(o.width===r[0]?r[0]:o.width===r[1]?r[1]:o.width===r[2]?r[2]:"")&&(o.height===s[0]?s[0]:o.height===s[1]?s[1]:o.height===s[2]?s[2]:"");t?a():i(new Error("错误"))},o.src=n.createObjectURL(t)})).then((function(){return t}),(function(){return e.$message.error("图片尺寸限制为".concat(e.valid.width[0]?e.valid.width[0]+" x ":"").concat(e.valid.height[0]?e.valid.height[0]:"").concat(e.valid.width[1]?"，"+e.valid.width[1]+" x ":"").concat(e.valid.height[1]?e.valid.height[1]:"").concat(e.valid.width[2]?"，"+e.valid.width[2]+" x ":"").concat(e.valid.height[2]?e.valid.height[2]:"")),Promise.reject(new Error("错误"))}));return a&&r}return!0},clearImg:function(){if("look"===this.$props.type)return!1;this.$emit("emitImageData",{})}}},o=n,l=(a("9f2a"),a("2877")),c=Object(l["a"])(o,i,r,!1,null,null,null);e["a"]=c.exports},"9f2a":function(t,e,a){"use strict";var i=a("ed51"),r=a.n(i);r.a},ed51:function(t,e,a){},ffa8:function(t,e,a){"use strict";var i=a("2c23"),r=a.n(i);r.a}}]);
//# sourceMappingURL=chunk-003253fa.6c319fc2.js.map