{"version":3,"sources":["webpack:///delegated ./node_modules/core-js/modules/es.string.search.js from dll-reference vendor_8e18555b2713041da4df","webpack:///./src/pages/switchproduct/history.vue?8f6c","webpack:///src/pages/switchproduct/history.vue","webpack:///./src/pages/switchproduct/history.vue?380e","webpack:///./src/pages/switchproduct/history.vue","webpack:///delegated ./node_modules/core-js/modules/es.object.keys.js from dll-reference vendor_8e18555b2713041da4df","webpack:///delegated ./node_modules/core-js/modules/es.object.get-own-property-descriptors.js from dll-reference vendor_8e18555b2713041da4df","webpack:///delegated ./node_modules/core-js/modules/es.object.get-own-property-descriptor.js from dll-reference vendor_8e18555b2713041da4df"],"names":["module","exports","__webpack_require__","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","model","value","callback","$$v","dateRange","expression","on","search","_v","exportData","staticStyle","searchResult","total","pageSize","page","$event","onPageChange","ref","exportUrl","directives","name","rawName","domProps","target","composing","userToken","staticRenderFns","data","start","setTime","getTime","end","JSON","parse","localStorage","getItem","user","info","token","mounted","methods","getHistoryList","form","querySelector","params","start_time","end_time","submit","formatTime","m","d","getParams","component"],"mappings":"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","file":"js/chunk-230043fe.f07a7a45.js","sourcesContent":["module.exports = (__webpack_require__(\"1c0f\"))(365);","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-content\"},[_c('el-form',{attrs:{\"inline\":true}},[_c('el-form-item',{attrs:{\"label\":\"请选择日期\"}},[_c('el-date-picker',{attrs:{\"clearable\":false,\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\"},model:{value:(_vm.dateRange),callback:function ($$v) {_vm.dateRange=$$v},expression:\"dateRange\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.search}},[_vm._v(\" 查询 \")]),_c('el-button',{on:{\"click\":_vm.exportData}},[_vm._v(\" 导出 \")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.searchResult}},[_c('el-table-column',{attrs:{\"prop\":\"sn\",\"label\":\"sn\"}}),_c('el-table-column',{attrs:{\"prop\":\"mac\",\"label\":\"mac\"}}),_c('el-table-column',{attrs:{\"prop\":\"product_name\",\"label\":\"product_name\"}}),_c('el-table-column',{attrs:{\"prop\":\"product_type\",\"label\":\"product_type\"}})],1),_c('div',{staticClass:\"page-line\"},[_c('el-pagination',{attrs:{\"total\":_vm.total,\"page-size\":_vm.pageSize,\"current-page\":_vm.page,\"small\":\"\",\"layout\":\"prev, pager, next\"},on:{\"update:currentPage\":function($event){_vm.page=$event},\"update:current-page\":function($event){_vm.page=$event},\"current-change\":_vm.onPageChange}})],1),_c('form',{ref:\"exportForm\",attrs:{\"action\":_vm.exportUrl,\"method\":\"POST\",\"target\":\"exportFrame\",\"name\":\"exportForm\"}},[_c('input',{attrs:{\"type\":\"hidden\",\"name\":\"start_time\"}}),_c('input',{attrs:{\"type\":\"hidden\",\"name\":\"end_time\"}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userToken),expression:\"userToken\"}],attrs:{\"type\":\"hidden\",\"name\":\"token\"},domProps:{\"value\":(_vm.userToken)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.userToken=$event.target.value}}})]),_c('iframe',{attrs:{\"src\":\"\",\"name\":\"exportFrame\",\"frameborder\":\"0\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"page-content\">\r\n    <el-form :inline=\"true\">\r\n      <el-form-item label=\"请选择日期\">\r\n        <el-date-picker\r\n          v-model=\"dateRange\"\r\n          :clearable=\"false\"\r\n          type=\"daterange\"\r\n          range-separator=\"至\"\r\n          start-placeholder=\"开始日期\"\r\n          end-placeholder=\"结束日期\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button\r\n          type=\"primary\"\r\n          @click=\"search\"\r\n        >\r\n          查询\r\n        </el-button>\r\n        <el-button @click=\"exportData\">\r\n          导出\r\n        </el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <el-table\r\n      :data=\"searchResult\"\r\n      style=\"width: 100%\"\r\n    >\r\n      <el-table-column\r\n        prop=\"sn\"\r\n        label=\"sn\"\r\n      />\r\n      <el-table-column\r\n        prop=\"mac\"\r\n        label=\"mac\"\r\n      />\r\n      <el-table-column\r\n        prop=\"product_name\"\r\n        label=\"product_name\"\r\n      />\r\n      <el-table-column\r\n        prop=\"product_type\"\r\n        label=\"product_type\"\r\n      />\r\n    </el-table>\r\n\r\n    <div class=\"page-line\">\r\n      <el-pagination\r\n        :total=\"total\"\r\n        :page-size=\"pageSize\"\r\n        :current-page.sync=\"page\"\r\n        small\r\n        layout=\"prev, pager, next\"\r\n        @current-change=\"onPageChange\"\r\n      />\r\n    </div>\r\n\r\n    <!-- 导出 -->\r\n    <form\r\n      ref=\"exportForm\"\r\n      :action=\"exportUrl\"\r\n      method=\"POST\"\r\n      target=\"exportFrame\"\r\n      name=\"exportForm\"\r\n    >\r\n      <input\r\n        type=\"hidden\"\r\n        name=\"start_time\"\r\n      >\r\n      <input\r\n        type=\"hidden\"\r\n        name=\"end_time\"\r\n      >\r\n      <input\r\n        v-model=\"userToken\"\r\n        type=\"hidden\"\r\n        name=\"token\"\r\n      >\r\n    </form>\r\n    <iframe\r\n      src=\"\"\r\n      name=\"exportFrame\"\r\n      frameborder=\"0\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  switchProductHistory,\r\n  switchProductHistoryExport\r\n} from '../../lib/api.js'\r\nimport axios from '../../lib/http.js'\r\n\r\nexport default {\r\n  data () {\r\n    const end = new Date()\r\n    const start = new Date()\r\n    start.setTime(start.getTime() - 3600 * 1000 * 24 * 30)\r\n\r\n    return {\r\n      searchResult: [],\r\n      dateRange: [start, end],\r\n      total: 0,\r\n      pageSize: 20,\r\n      page: 1,\r\n      exportUrl: switchProductHistoryExport,\r\n      userToken: JSON.parse(localStorage.getItem('localData')).user.info.token\r\n    }\r\n  },\r\n  mounted () {\r\n    this.search()\r\n  },\r\n  methods: {\r\n    getHistoryList () {\r\n      axios\r\n        .post(switchProductHistory, {\r\n          ...this.getParams(),\r\n          page: this.page,\r\n          limit: this.pageSize\r\n        })\r\n        .then(res => {\r\n          this.searchResult = res.data.result.data || []\r\n          this.total = res.data.result.total || 0\r\n        })\r\n    },\r\n    exportData () {\r\n      const form = this.$refs.exportForm\r\n      const params = this.getParams()\r\n      form.querySelector('[name=\"start_time\"]').value = params.start_time\r\n      form.querySelector('[name=\"end_time\"]').value = params.end_time\r\n      form.submit()\r\n      // axios\r\n      //     .post(switchProductHistoryExport, this.getParams())\r\n      //     .then(res => {\r\n      //         this.$message({\r\n      //             message: \"导出成功！\",\r\n      //             type: \"success\"\r\n      //         });\r\n      //     });\r\n    },\r\n    search () {\r\n      this.page = 1\r\n      this.getHistoryList()\r\n    },\r\n    onPageChange (page) {\r\n      this.getHistoryList()\r\n    },\r\n    // 2018-09-21 09:50\r\n    formatTime (time, end) {\r\n      let y = time.getFullYear()\r\n      let m = time.getMonth() + 1\r\n      let d = time.getDate()\r\n      m = m < 10 ? '0' + m : m\r\n      d = d < 10 ? '0' + d : d\r\n      return `${y}-${m}-${d} ${end ? '23:59' : '00:00'}`\r\n    },\r\n    getParams () {\r\n      return {\r\n        start_time: this.formatTime(this.dateRange[0]),\r\n        end_time: this.formatTime(this.dateRange[1], true)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./history.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./history.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./history.vue?vue&type=template&id=eabf8780&\"\nimport script from \"./history.vue?vue&type=script&lang=js&\"\nexport * from \"./history.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = (__webpack_require__(\"1c0f\"))(313);","module.exports = (__webpack_require__(\"1c0f\"))(306);","module.exports = (__webpack_require__(\"1c0f\"))(305);"],"sourceRoot":""}